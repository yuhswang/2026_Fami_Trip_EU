<!DOCTYPE html>
<html lang="zh-TW">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="æ­æ´²è¡Œç¨‹2026">
        <title>æ˜¥éŠæ­æ´²2026</title>

        <script src="https://cdn.tailwindcss.com"></script>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            euro: {
                                bg: '#FDFCF8', // æš–å¥¶æ²¹ç™½
                                card: '#FFFFFF', // ç´”ç™½
                                text: '#3D3D3D', // æ·±ç°
                                primary: '#5F6F52', // é¼ å°¾è‰ç¶ 
                                secondary: '#A98467', // çš®é©æ£•
                                light: '#EFEAD8', // æ·ºå¡å…¶
                                link: '#d97706', // é€£çµè‰²(ç¥ç€)
                                accent: '#C75B5B', // è­¦ç¤ºç´…
                            }
                        },
                        fontFamily: {
                            serif: [
                                '"Playfair Display"', 'serif'
                            ],
                            sans: ['"Noto Sans TC"', 'sans-serif']
                        }
                    }
                }
            }
        </script>

        <style>
            html {
                scroll-behavior: smooth;
            }
            .scroll-mt-20 {
                scroll-margin-top: 5rem; /* é ç•™é ‚éƒ¨ç©ºé–“ï¼Œé¿å…æ¨™é¡Œè¢«é®ä½ */
            }
            body {
                background-color: #FDFCF8;
                color: #3D3D3D;
                font-family: 'Noto Sans TC', sans-serif;
                -webkit-tap-highlight-color: transparent;
                padding-bottom: 90px;
                /* Space for bottom nav */
            }

            h1,
            h2,
            h3,
            .serif-font {
                font-family: 'Playfair Display', serif;
                font-family: 'Noto Sans TC', sans-serif;
            }

            .title-text {
                font-family: 'Noto Sans TC', sans-serif;
                font-weight: 700;
            }

            .no-scrollbar::-webkit-scrollbar {
                display: none;
            }

            .no-scrollbar {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .tab-content {
                display: none;
                animation: fadeIn 0.4s ease-out;
            }

            .tab-content.active {
                display: block;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(8px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .nav-item.active {
                color: #5F6F52;
            }

            .nav-item.active span {
                font-weight: 700;
            }

            .euro-shadow {
                box-shadow: 0 6px 20px -4px rgba(95, 111, 82, 0.15);
            }

            /* Modal */
            .modal {
                transition: opacity 0.3s ease-in-out;
                opacity: 0;
                pointer-events: none;
            }

            .modal.open {
                opacity: 1;
                pointer-events: auto;
            }

            .modal-content {
                transform: scale(0.95);
                transition: transform 0.3s ease-in-out;
            }

            .modal.open .modal-content {
                transform: scale(1);
            }

            /* Custom Bullet Points */
            .check-list li {
                position: relative;
                padding-left: 1.5rem;
                margin-bottom: 0.5rem;
            }

            .check-list li::before {
                content: '\f00c';
                font-family: "Font Awesome 6 Free";
                font-weight: 900;
                position: absolute;
                left: 0;
                color: #A98467;
            }

            .note-block {
                word-break: break-all; /* é˜²æ­¢é•·ç¶²å€æˆ–é•·è‹±æ–‡æ’ç ´ç‰ˆé¢ */
            }

            /* éš±è—å°è¦½åˆ—çš„æ²è»¸ä½†ä¿ç•™æ»‘å‹•åŠŸèƒ½ */
            .no-scrollbar::-webkit-scrollbar {
                display: none;
            }
            .no-scrollbar {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            /* åŸºç¤æ¨£å¼ */
            .date-tab-btn {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                border-left: 3px solid transparent;
                color: #9ca3af; /* é è¨­ç°è‰² */
                cursor: pointer;
            }

            /* é†’ç›®æ¨£å¼ */
            .date-tab-btn.active {
                color: #A98467 !important;
                border-left-color: #1e40af !important;
                background-color: rgba(169, 132, 103, 0.1) !important;
                font-weight: 800 !important;
                transform: scale(1.05);
            }

            /* è®“å°è¦½åˆ—æ²è»¸æ›´å¹³æ»‘ */
            #side-date-tabs {
                scroll-behavior: smooth;
            }

            /* æ‰‹æ©Ÿç‰ˆé¸å–®çš„é€²å ´å‹•ç•« */
            @keyframes bounceIn {
                from { opacity: 0; transform: translateY(20px) scale(0.9); }
                to { opacity: 1; transform: translateY(0) scale(1); }
            }
            .animate-bounce-in {
                animation: bounceIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            }

            /* éš±è—æ²è»¸ */
            .no-scrollbar::-webkit-scrollbar { display: none; }
        </style>
    </head>

    <body class="antialiased min-h-screen relative selection:bg-euro-primary selection:text-white">

        <header class="bg-euro-bg/95 backdrop-blur-md sticky top-0 z-40 px-5 py-4 flex justify-between items-end border-b border-euro-light shadow-sm">
            <div>
                <h1 class="text-2xl font-bold text-euro-primary italic serif-font">Europe 2026</h1>
                <p class="text-sm text-euro-secondary tracking-widest mt-1">å¾·å¥§æ·åŒˆ â€¢ æ˜¥ç¯€æ—…éŠ</p>
            </div>
            <div class="text-right">
                <span id="headerDate" class="text-sm text-gray-400 font-medium"></span>
            </div>
        </header>

        <main class="p-4 max-w-lg mx-auto">

            <div id="tab-flight" class="tab-content">
                <h2 class="text-2xl font-bold text-center mb-6 text-euro-primary title-text">èˆªç­è³‡è¨Š</h2>

                <div class="bg-white rounded-xl overflow-hidden euro-shadow mb-8">
                    <div class="bg-euro-secondary p-3 text-white flex justify-between items-center">
                        <span class="font-bold">
                            <i class="fas fa-plane-departure mr-2"></i>å»ç¨‹ (2/11)</span>
                        <span class="text-xs bg-white/20 px-2 py-1 rounded">ç´„ 17h</span>
                    </div>

                    <div class="p-5 border-b border-gray-100">
                        <div class="relative pl-6 pb-6 border-l-2 border-gray-200">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-euro-primary border-2 border-white"></div>
                            <div class="flex justify-between mb-1">
                                <span class="font-bold text-xl">07:50 TPE</span>
                                <span class="text-gray-500 font-mono">CI 169</span>
                            </div>
                            <div class="text-sm text-gray-500">TPE T1
                                <i class="fas fa-long-arrow-alt-right mx-2"></i>
                                ICN
                                                                                            T2</div>
                        </div>
                        <div class="relative pl-6 pb-6 border-l-2 border-dashed border-gray-300">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-yellow-400 border-2 border-white"></div>
                            <div class="text-sm font-bold text-euro-secondary">ä»å· (ICN) è½‰æ©Ÿ 2h 10m</div>
                        </div>
                        <div class="relative pl-6 border-l-2 border-gray-200">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-euro-primary border-2 border-white"></div>
                            <div class="flex justify-between mb-1">
                                <span class="font-bold text-xl">13:30 ICN</span>
                                <span class="text-gray-500 font-mono">LH 719</span>
                            </div>
                            <div class="text-sm text-gray-500">ICN T1
                                <i class="fas fa-long-arrow-alt-right mx-2"></i>
                                MUC
                                                                                            T2</div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-5 space-y-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm">
                            <h4 class="font-bold text-euro-primary mb-2 text-sm">
                                <i class="fas fa-exchange-alt mr-2"></i>ä»å·è½‰æ©Ÿæ”»ç•¥</h4>
                            <ul class="text-xs text-gray-600 space-y-1 list-disc list-inside">
                                <li>
                                    <strong>è½‰æ©Ÿï¼š</strong>
                                    <a href='https://www.airport.kr/ap_ch/1659/subview.do' target='_blank' class='text-euro-secondary underline hover:text-euro-primary'>ä»å·æ©Ÿå ´è½‰æ©ŸæŒ‡å—</a>
                                </li>
                                <li>
                                    <strong>å®‰æª¢ï¼š</strong>è½‰æ©Ÿéœ€å†æ¬¡é€šéå®‰æª¢ï¼Œæ°´éœ€å€’æ‰ã€‚</li>
                                <li>
                                    <strong>è¨­æ–½ï¼š</strong>T2 è¨­æœ‰å…è²»æ·‹æµ´é–“ã€Nap Zone (èººæ¤…ä¼‘æ¯å€)ã€‚</li>
                                <li>
                                    <strong>é«”é©—ï¼š</strong>éŸ“åœ‹æ–‡åŒ–é«”é©—é¤¨å¯å…è²»åšæ‰‹å·¥è—ã€‚</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm">
                            <h4 class="font-bold text-euro-primary mb-2 text-sm">
                                <i class="fas fa-subway mr-2"></i>æ…•å°¼é»‘æ©Ÿå ´
                                                                                                    (MUC) å…¥å¢ƒ</h4>
                            <ul class="text-xs text-gray-600 space-y-1 list-disc list-inside">
                                <li>
                                    <strong>ç‰¹è‰²ï¼š</strong>ä¸–ç•Œå”¯ä¸€è¨­æœ‰é‡€é…’å» çš„æ©Ÿå ´ (AirbrÃ¤u)ã€‚</li>
                                <li>
                                    <strong>äº¤é€šï¼š</strong>å‡ºé—œå¾Œè·Ÿè‘—ç¶ è‰²
                                    <span class="bg-green-600 text-white px-1 rounded text-[10px]">S</span>
                                    (S-Bahn) æŒ‡æ¨™ã€‚</li>
                                <li>
                                    <strong>è·¯ç·šï¼š</strong>æ­ä¹˜
                                    <strong>S1</strong>
                                    æˆ–
                                    <strong>S8</strong>
                                    ç·šçš†å¯æŠµé”ä¸­å¤®è»Šç«™
                                                                                                        (Hauptbahnhof)ï¼Œç´„ 40 åˆ†é˜ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl overflow-hidden euro-shadow mb-6">
                    <div class="bg-euro-primary p-3 text-white flex justify-between items-center">
                        <span class="font-bold">
                            <i class="fas fa-plane-arrival mr-2"></i>å›ç¨‹ (2/27)</span>
                        <span class="text-xs bg-white/20 px-2 py-1 rounded">ç´„ 16h</span>
                    </div>

                    <div class="p-5 border-b border-gray-100">
                        <div class="relative pl-6 pb-6 border-l-2 border-gray-200">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-euro-secondary border-2 border-white"></div>
                            <div class="flex justify-between mb-1">
                                <span class="font-bold text-xl">23:25 VIE</span>
                                <span class="text-gray-500 font-mono">OS 007</span>
                            </div>
                            <div class="text-sm text-gray-500">VIE T3
                                <i class="fas fa-long-arrow-alt-right mx-2"></i>
                                BKK
                            </div>
                        </div>
                        <div class="relative pl-6 pb-6 border-l-2 border-dashed border-gray-300">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-yellow-400 border-2 border-white"></div>
                            <div class="text-sm font-bold text-euro-secondary">æ›¼è°· (BKK) è½‰æ©Ÿ 2h 20m</div>
                        </div>
                        <div class="relative pl-6 border-l-2 border-gray-200">
                            <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-euro-secondary border-2 border-white"></div>
                            <div class="flex justify-between mb-1">
                                <span class="font-bold text-xl">17:50 BKK</span>
                                <span class="text-gray-500 font-mono">CI 836</span>
                            </div>
                            <div class="text-sm text-gray-500">BKK
                                <i class="fas fa-long-arrow-alt-right mx-2"></i>
                                TPE T1
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-5 space-y-4">
                        <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm">
                            <h4 class="font-bold text-euro-primary mb-2 text-sm">
                                <i class="fas fa-shopping-bag mr-2"></i>ç¶­ä¹Ÿç´æ©Ÿå ´ (VIE) é›¢å¢ƒ</h4>
                            <ul class="text-xs text-gray-600 space-y-1 list-disc list-inside">
                                <li>
                                    <strong>äº¤é€šï¼š</strong>å¾ä¸­å¤®è»Šç«™æ­
                                    <strong>RJ (Railjet)</strong>
                                    ç›´é”æ©Ÿå ´æœ€å¿« (15åˆ†é˜)ã€‚</li>
                                <li>
                                    <strong>è³¼ç‰©ï¼š</strong>å¿…è²· Manner å¨åŒ–é¤…ã€è«æœ­ç‰¹å·§å…‹åŠ›ã€æ–½è¯æ´›ä¸–å¥‡ã€‚</li>
                                <li>
                                    <strong>é€€ç¨…ï¼š</strong>è«‹é ç•™ 3 å°æ™‚ï¼Œæµ·é—œè“‹ç« éšŠä¼é€šå¸¸å¾ˆé•·ã€‚</li>
                            </ul>
                        </div>
                        <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm">
                            <h4 class="font-bold text-euro-primary mb-2 text-sm">
                                <i class="fas fa-spa mr-2"></i>æ›¼è°·è½‰æ©Ÿæ”»ç•¥</h4>
                            <ul class="text-xs text-gray-600 space-y-1 list-disc list-inside">
                                <li>
                                    <strong>ç¾é£Ÿï¼š</strong>è½‰æ©Ÿå€æœ‰ Mango Sticky Rice (èŠ’æœç³¯ç±³)ã€‚</li>
                                <li>
                                    <strong>æ”¾é¬†ï¼š</strong>è‹¥æ™‚é–“å……è£•ï¼Œå¯é«”é©—æ³°å¼è‚©é ¸æŒ‰æ‘©ã€‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-plan" class="tab-content active">
                <div class="flex gap-4 items-start max-w-6xl mx-auto px-4 py-8">
                    <nav class="hidden lg:block sticky top-24 w-32 flex-shrink-0 self-start">
                        <div id="side-date-tabs" 
                             class="flex flex-col gap-4 border-l-2 border-gray-100 pl-4 max-h-[calc(100vh-120px)] overflow-y-auto no-scrollbar">
                            </div>
                    </nav>
                
                    <div id="itinerary-list" class="flex-1 space-y-8"></div>
                </div>
            </div>

            <div id="tab-guide" class="tab-content">
                <h2 class="text-2xl font-bold text-center mb-4 text-euro-primary title-text">åŸå¸‚å°è¦½</h2>
                <p class="text-center text-xs text-gray-400 mb-6">é»æ“ŠåŸå¸‚å¡ç‰‡æŸ¥çœ‹è©³ç´°æ”»ç•¥</p>
                <div class="grid grid-cols-2 gap-4">
                    <div onclick="openCityModal('munich')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/Munich.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">æ…•å°¼é»‘</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('salzburg')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/Salzburg.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">è–©çˆ¾æ–¯å ¡</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('hallstatt')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/Hallstatt.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">å“ˆä¿®å¡”ç‰¹</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('ck')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/ck.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">CKå°é®</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('prague')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/prague.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">å¸ƒæ‹‰æ ¼</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('budapest')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/budapest.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">å¸ƒé”ä½©æ–¯</div>
                            </div>
                        </div>
                    </div>
                    <div onclick="openCityModal('vienna')" class="bg-white rounded-xl overflow-hidden euro-shadow cursor-pointer active:scale-95 transition col-span-2 group">
                        <div class="h-32 relative overflow-hidden">
                            <img src="./img/vienna.jpg" class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <div class="absolute bottom-0 w-full bg-gradient-to-t from-black/70 to-transparent p-2 pt-8">
                                <div class="text-white font-bold text-lg">ç¶­ä¹Ÿç´</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-lists" class="tab-content">
                <div class="bg-euro-card rounded-xl p-5 mb-6 euro-shadow border border-euro-light">
                    <h3 class="font-bold text-xl mb-4 text-euro-primary border-b border-gray-100 pb-2">è¡Œå‰æª¢æŸ¥è¡¨</h3>
                    <div id="checklist-container" class="space-y-3"></div>
                </div>
            </div>

            <div id="tab-info" class="tab-content">
                <h2 class="text-2xl font-bold text-center mb-6 text-euro-primary title-text">è³‡è¨Šä¸­å¿ƒ</h2>

                <div class="mb-8">
                    <h3 class="font-bold text-gray-700 mb-3 px-1">
                        <i class="fas fa-cloud-sun text-euro-secondary mr-2"></i>ç•¶åœ°å¤©æ°£</h3>
                    <div class="grid grid-cols-3 gap-2">
                        <a href="https://www.accuweather.com/zh-tw/de/munich/80331/weather-forecast/178086" target="_blank" class="bg-white p-3 rounded-lg text-center shadow-sm border border-gray-100 hover:border-euro-secondary transition">
                            <div class="text-xs text-gray-400">å¾·åœ‹</div>
                            <div class="font-bold text-euro-text">æ…•å°¼é»‘</div>
                        </a>
                        <a href="https://www.accuweather.com/zh-tw/at/salzburg/5020/weather-forecast/29272" target="_blank" class="bg-white p-3 rounded-lg text-center shadow-sm border border-gray-100 hover:border-euro-secondary transition">
                            <div class="text-xs text-gray-400">å¥§åœ°åˆ©</div>
                            <div class="font-bold text-euro-text">è–©çˆ¾æ–¯å ¡</div>
                        </a>
                        <a href="https://www.accuweather.com/zh-tw/cz/prague/125594/weather-forecast/125594" target="_blank" class="bg-white p-3 rounded-lg text-center shadow-sm border border-gray-100 hover:border-euro-secondary transition">
                            <div class="text-xs text-gray-400">æ·å…‹</div>
                            <div class="font-bold text-euro-text">å¸ƒæ‹‰æ ¼</div>
                        </a>
                        <a href="https://www.accuweather.com/zh-tw/hu/budapest/187423/weather-forecast/187423" target="_blank" class="bg-white p-3 rounded-lg text-center shadow-sm border border-gray-100 hover:border-euro-secondary transition">
                            <div class="text-xs text-gray-400">åŒˆç‰™åˆ©</div>
                            <div class="font-bold text-euro-text">å¸ƒé”ä½©æ–¯</div>
                        </a>
                        <a href="https://www.accuweather.com/zh-tw/at/vienna/1010/weather-forecast/31868" target="_blank" class="bg-white p-3 rounded-lg text-center shadow-sm border border-gray-100 hover:border-euro-secondary transition">
                            <div class="text-xs text-gray-400">å¥§åœ°åˆ©</div>
                            <div class="font-bold text-euro-text">ç¶­ä¹Ÿç´</div>
                        </a>
                    </div>
                </div>

                <div class="bg-white rounded-xl p-5 mb-8 euro-shadow border-l-4 border-euro-primary">
                    <h3 class="font-bold text-euro-primary mb-3 text-lg">
                        <i class="fas fa-shield-alt mr-2"></i>å¯Œé‚¦ç”¢éšªè³‡è¨Š</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between border-b border-gray-100 pb-2">
                            <span class="text-gray-500">ä¿å–®è™Ÿç¢¼</span>
                            <div class="border-b border-gray-100 pb-2">
                                <p class="font-mono font-bold">050026CT20064885 (ç‹éˆºæ˜•)</p>
                                <p class="font-mono font-bold">050026CT20064885 (é‚±å¹¼ç¾)</p>
                            </div>
                        </div>
                        <div class="flex justify-between border-b border-gray-100 pb-2">
                            <span class="text-gray-500">æµ·å¤–ç·Šæ€¥æ•‘æ´</span>
                            <div class="border-b border-gray-100 pb-2 flex flex-col items-end gap-2">
                                <a href="tel:+886225636292" class="block font-bold text-blue-600 mb-2 text-sm"> 
                                    <i class="fas fa-phone-alt mr-1"></i>+886-2-25636292
                                </a>
                                <button onclick="goToUrl(`https://b2c.518fb.com/TravelHouseKeeper/urgent#`)" 
                                        class="text-xs border border-euro-primary text-euro-primary px-3 py-0.5 rounded hover:bg-euro-primary hover:text-white transition flex-shrink-0 whitespace-nowrap">
                                    å®˜ç¶²èªªæ˜
                                </button>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-3 rounded text-xs text-gray-600 leading-relaxed">
                            <strong class="text-gray-800">è‹¥ä½¿ç”¨ç•¶åœ°å…¬å…±é›»è©±ï¼š</strong><br>
                            æ’¥æ‰“: ç•¶åœ°åœ‹éš›å† ç¢¼ -886-2-25636292
                        </div>
                        <div class="bg-gray-50 p-3 rounded text-xs text-gray-600 leading-relaxed">
                            <strong class="text-gray-800">ç†è³ æé†’ï¼š</strong><br>
                            è‹¥é‡ç­æ©Ÿå»¶èª¤æˆ–è¡Œæéºå¤±ï¼Œè«‹å‹™å¿…ç´¢å–ã€Œèˆªç©ºå…¬å¸è­‰æ˜ã€ã€‚è‹¥é‡ç”Ÿç—…å°±é†«ï¼Œè«‹ä¿ç•™ã€Œè¨ºæ–·è­‰æ˜ã€èˆ‡ã€Œæ”¶æ“šæ­£æœ¬ã€ã€‚
                        </div>
                        <div class="bg-gray-50 p-3 rounded text-xs text-gray-600 leading-relaxed">
                            <p class="text-xs text-gray-700 leading-relaxed mb-2">
                                <strong>ğŸ’¡ ç­æ©Ÿå»¶èª¤ç†è³ é‡é»ï¼š</strong><br>
                                <ul class="list-disc ml-4 mt-1 space-y-1">
                                    <li><strong>æ»¿ 4 å°æ™‚</strong>èµ·è³ ï¼Œæ¯æ»¿ 4 å°æ™‚çµ¦ä»˜ä¸€æ¬¡ã€‚</li>
                                    <li>æœ€å¤šç†è³  <strong>2 æ¬¡</strong> äº‹æ•…ã€‚</li>
                                    <li>æ¶µè“‹ï¼šéŒ¯éè½‰æ©Ÿã€è‡ªè¡Œè³¼è²·çš„æ›¿ä»£ç­æ©Ÿã€‚</li>
                                </ul>
                            </p>
                        </div>
                       <div class="bg-gray-50 p-3 rounded text-xs text-gray-600 leading-relaxed">
                            <p class="text-xs text-gray-700 leading-relaxed mb-2">
                                <strong><i class="fas fa-briefcase mr-1"></i>è¡Œæå»¶èª¤ç†è³ è¦é»ï¼š</strong>
                                <ul class="list-disc ml-4 mt-1 space-y-1">
                                    <li>æŠµé”ç›®çš„åœ°<strong>æ»¿ 6 å°æ™‚</strong>æœªé ˜å¾—è¡Œæå³ç†è³ ã€‚</li>
                                    <li><strong>å›å°ç£/å±…ä½åœ°</strong>ç™¼ç”Ÿçš„å»¶èª¤ä¸ç†è³ ã€‚</li>
                                    <li>é ˆé ˜æœ‰ã€Œè¨—é‹è¡Œæé ˜å–å–®ã€æ‰ç¬¦åˆè³‡æ ¼ã€‚</li>
                                </ul>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-[#FFF5F5] rounded-xl p-5 mb-6 border border-red-100">
                    <h3 class="font-bold text-red-900 mb-4 text-lg">
                        <i class="fas fa-passport mr-2"></i>å°ç£é§å¤–è¾¦äº‹è™•</h3>

                    <div class="space-y-4">
                        <div>
                            <div class="font-bold text-red-900 text-sm mb-1">
                                <span class="mr-2">ğŸ‡©ğŸ‡ª</span>é§æ…•å°¼é»‘è¾¦äº‹è™• (å¾·åœ‹)
                            </div>
                            <div class="pl-6 text-sm text-gray-600">
                                <div class="mb-1">
                                    <i class="fas fa-phone-alt w-5 text-gray-400"></i>
                                    <a href="tel:+49895126790" class="underline">+49-89-5126-790</a>
                                </div>
                                <div class="text-xs bg-white p-2 rounded border border-red-50">æ€¥é›£æ•‘åŠ©ï¼š+49-175-570-8059</div>
                            </div>
                        </div>
                        <div>
                            <div class="font-bold text-red-900 text-sm mb-1">
                                <span class="mr-2">ğŸ‡¦ğŸ‡¹</span>é§å¥§åœ°åˆ©ä»£è¡¨è™• (ç¶­ä¹Ÿç´)
                            </div>
                            <div class="pl-6 text-sm text-gray-600">
                                <div class="mb-1">
                                    <i class="fas fa-phone-alt w-5 text-gray-400"></i>
                                    <a href="tel:+4312124720" class="underline">+43-1-212-4720</a>
                                </div>
                                <div class="text-xs bg-white p-2 rounded border border-red-50">æ€¥é›£æ•‘åŠ©ï¼š+43-664-345-0455</div>
                            </div>
                        </div>
                        <div>
                            <div class="font-bold text-red-900 text-sm mb-1">
                                <span class="mr-2">ğŸ‡¨ğŸ‡¿</span>é§æ·å…‹ä»£è¡¨è™• (å¸ƒæ‹‰æ ¼)
                            </div>
                            <div class="pl-6 text-sm text-gray-600">
                                <div class="mb-1">
                                    <i class="fas fa-phone-alt w-5 text-gray-400"></i>
                                    <a href="tel:+420233320606" class="underline">+420-233-320-606</a>
                                </div>
                                <div class="text-xs bg-white p-2 rounded border border-red-50">æ€¥é›£æ•‘åŠ©ï¼š+420-603-166-707</div>
                            </div>
                        </div>
                        <div>
                            <div class="font-bold text-red-900 text-sm mb-1">
                                <span class="mr-2">ğŸ‡­ğŸ‡º</span>é§åŒˆç‰™åˆ©ä»£è¡¨è™• (å¸ƒé”ä½©æ–¯)
                            </div>
                            <div class="pl-6 text-sm text-gray-600">
                                <div class="mb-1">
                                    <i class="fas fa-phone-alt w-5 text-gray-400"></i>
                                    <a href="tel:+3612662884" class="underline">+36-1-266-2884</a>
                                </div>
                                <div class="text-xs bg-white p-2 rounded border border-red-50">æ€¥é›£æ•‘åŠ©ï¼š+36-30-964-1601</div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-red-200 text-center">
                        <span class="text-sm font-bold text-red-900">æ­ç›Ÿé€šç”¨æ€¥é›£é›»è©±ï¼š112</span>
                    </div>
                </div>
            </div>

        </main>

        <div id="cityModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
            <div class="modal-content bg-white w-full max-w-md max-h-[85vh] rounded-2xl shadow-2xl relative flex flex-col overflow-hidden">

                <button onclick="closeModal('cityModal')" class="absolute top-3 right-3 bg-white/80 w-8 h-8 rounded-full flex items-center justify-center text-gray-600 hover:text-red-500 z-50 shadow-sm backdrop-blur-md transition-transform active:scale-90">
                    <i class="fas fa-times text-lg"></i>
                </button>

                <div id="modalBody" class="overflow-y-auto flex-1 overscroll-contain"></div>
            </div>
        </div>

        <div id="detailModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
            <div class="modal-content bg-white w-full max-w-md max-h-[90vh] rounded-2xl shadow-2xl relative flex flex-col overflow-hidden">

                <div class="bg-euro-primary p-4 text-white flex justify-between items-center z-10 shrink-0">
                    <h3 class="font-bold text-lg tracking-wide" id="detailTitle">è©³ç´°è³‡è¨Š</h3>
                    <button onclick="closeModal('detailModal')" class="w-8 h-8 flex items-center justify-center rounded-full bg-white/20 hover:bg-white/30 transition">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>

                <div class="p-5 overflow-y-auto flex-1 bg-white">
                    <input type="hidden" id="detailId">

                    <div class="mb-6 bg-gray-50 p-4 rounded-xl border border-gray-100 shadow-sm">
                        <h4 class="font-bold text-gray-700 mb-3 text-sm flex items-center">
                            <i class="fas fa-ticket-alt mr-2 text-euro-secondary"></i>ç¥¨åˆ¸ / é›²ç«¯æª”æ¡ˆ
                        </h4>

                        <div id="staticLinksContainer" class="space-y-2 mb-4 empty:hidden"></div>

                        <div id="linkDivider" class="h-px bg-gray-200 my-4 hidden"></div>

                        <div class="text-xs text-gray-400 mb-2 font-bold">è‡ªè¨‚é€£çµåˆ—è¡¨ (æ¨™é¡Œ / ç¶²å€)</div>
                        <div id="customLinksContainer" class="space-y-3"></div>

                        <button onclick="addCustomLinkRow('', '')" class="mt-3 w-full py-2 border-2 border-dashed border-gray-300 text-gray-400 rounded-lg text-sm hover:border-euro-secondary hover:text-euro-secondary transition flex items-center justify-center">
                            <i class="fas fa-plus mr-1"></i>
                            æ–°å¢ä¸€çµ„é€£çµ
                        </button>
                    </div>

                    <div>
                        <h4 class="font-bold text-gray-700 mb-2 text-sm flex items-center">
                            <i class="fas fa-pen mr-2 text-euro-secondary"></i>å‚™è¨» / æ³¨æ„äº‹é …
                        </h4>
                        <textarea id="detailNote" class="w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:border-euro-secondary focus:ring-1 focus:ring-euro-secondary transition leading-relaxed text-gray-700" rows="5" placeholder="ä¾‹å¦‚ï¼šè¨‚ä½ä»£è™Ÿã€é›†åˆåœ°é»..."></textarea>
                    </div>
                </div>

                <div class="p-4 border-t border-gray-100 bg-gray-50 shrink-0">
                    <button onclick="saveDetail()" class="w-full bg-euro-primary text-white py-3 rounded-xl font-bold shadow-md hover:bg-opacity-90 active:scale-95 transition tracking-widest">
                        å„²å­˜ä¿®æ”¹
                    </button>
                </div>
            </div>
        </div>

        <nav class="fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur-md border-t border-gray-100 px-2 py-2 flex justify-between items-center z-40 text-gray-400 pb-5">
            <button onclick="switchTab('plan')" class="nav-item active flex flex-col items-center gap-1 w-1/5" data-target="plan">
                <i class="fas fa-calendar-alt text-xl mb-0.5"></i>
                <span class="text-[10px]">è¡Œç¨‹</span>
            </button>
            <button onclick="switchTab('flight')" class="nav-item flex flex-col items-center gap-1 w-1/5" data-target="flight">
                <i class="fas fa-plane text-xl mb-0.5"></i>
                <span class="text-[10px]">èˆªç­</span>
            </button>
            <button onclick="switchTab('guide')" class="nav-item flex flex-col items-center gap-1 w-1/5" data-target="guide">
                <i class="fas fa-book-open text-xl mb-0.5"></i>
                <span class="text-[10px]">å°è¦½</span>
            </button>
            <button onclick="switchTab('lists')" class="nav-item flex flex-col items-center gap-1 w-1/5" data-target="lists">
                <i class="fas fa-check-square text-xl mb-0.5"></i>
                <span class="text-[10px]">æ¸…å–®</span>
            </button>
            <button onclick="switchTab('info')" class="nav-item flex flex-col items-center gap-1 w-1/5" data-target="info">
                <i class="fas fa-info-circle text-xl mb-0.5"></i>
                <span class="text-[10px]">è³‡è¨Š</span>
            </button>
        </nav>

        <div id="mobile-date-nav-container" class="hidden lg:hidden fixed bottom-24 right-6 z-[100]">
            <div id="mobile-date-menu" class="hidden mb-4 bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden max-h-[60vh] overflow-y-auto w-40">
                <div id="mobile-date-tabs" class="flex flex-col"></div>
            </div>
            
            <button onclick="toggleMobileMenu()" class="w-14 h-14 bg-euro-primary/60 text-white rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform active:scale-95">
                <i id="menu-icon" class="fas fa-calendar-alt text-xl"></i>
            </button>
        </div>

        <script>
            // ================= ITINERARY DATA =================
            const itineraryData = [
                {
                    date: "2/11", day: "é€±ä¸‰", city: "æ…•å°¼é»‘", hotel: "Metropol by Maier Privathotels", 
                    hotelTicket: "https://drive.google.com/file/d/1STKYkF4877aFvAF0ABy_lfCr105BU1SZ/view?usp=drive_link",
                    startTime: "09:00", endTime: "20:30",
                    timeline: [
                        { id: "1100", time: "07:50", event: "æ¡ƒåœ’æ©Ÿå ´èµ·é£›", loc: "Taoyuan Airport", type: "flight", 
                            ticket: [
                                { name: "CHIUYUMEI_ä¸­æ–‡æ©Ÿç¥¨", url: "https://drive.google.com/file/d/1NztD-zBK_rpBpdplLjHrUUfG-hAWIH1X/view?usp=drive_link" },
                                { name: "CHIUYUMEI_è‹±æ–‡æ–‡æ©Ÿç¥¨", url: "https://drive.google.com/file/d/11p2VkumUkVSTNrDjiqcXPE1LrZDu2Fsv/view?usp=drive_link" },
                                { name: "WANGYUHSIN_ä¸­æ–‡æ©Ÿç¥¨", url: "https://drive.google.com/file/d/1F4U0oaiwsBl3RaeL6og7KRinJlZ3wigY/view?usp=drive_link" },
                                { name: "WANGYUHSIN_è‹±æ–‡æ©Ÿç¥¨", url: "https://drive.google.com/file/d/16Iynz2v5N6S1iwULO3IqsoXz_kfv3MFH/view?usp=drive_link" },
                            ],
                            note: "" },
                        { id: "1103", time: "11:20", event: "æŠµé”ä»å·æ©Ÿå ´", loc: "ä»å·åœ‹éš›æ©Ÿå ´", type: "flight", ticket: "", note: "å°ç£æ™‚é–“+1" },
                        { id: "1104", time: "13:30", event: "ä»å·æ©Ÿå ´èµ·é£›", loc: "ä»å·åœ‹éš›æ©Ÿå ´", type: "flight", ticket: "", note: "" },
                        { id: "1101", time: "18:35", event: "æŠµé”æ…•å°¼é»‘æ©Ÿå ´", loc: "MUC Airport", type: "flight", ticket: "", note: "" }                        
                    ]
                },
                {
                    date: "2/12", day: "é€±å››", city: "æ…•å°¼é»‘", hotel: "Metropol by Maier Privathotels", 
                    startTime: "09:00", endTime: "20:40",
                    timeline: [
                        { id: "1201", time: "09:00", event: "ç‘ªéº—äºå»£å ´", loc: "Marienplatz", type: "sight", ticket: "", note: "" },
                        { id: "1202", time: "12:00", event: "çš‡å®¶å•¤é…’å±‹åˆé¤", loc: "HofbrÃ¤uhaus MÃ¼nchen", type: "food", ticket: "", note: "" },
                        { id: "1203", time: "14:00", event: "æ…•å°¼é»‘ç‹å®®", loc: "Munich Residenz", type: "sight", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/13", day: "é€±äº”", city: "è–©çˆ¾æ–¯å ¡", hotel: "Altstadt Hotel Hofwirt", startTime: "09:00",
                    timeline: [
                        { id: "1301", time: "09:00", event: "æ­ç«è»Šå¾€è–©çˆ¾æ–¯å ¡", loc: "Munich Central Station", type: "transport", ticket: "", note: "è»Šç¥¨åœ¨ Apple Wallet" },
                        { id: "1302", time: "13:00", event: "èˆŠåŸå€æ¼«æ­¥", loc: "Getreidegasse", type: "sight", ticket: "", note: "" }
                    ],
                    hotelTicket: "https://drive.google.com/file/d/1aMuD0HNtbdzqGgrhj53rK59nBpagCRl4/view?usp=drive_link"
                },
                {
                    date: "2/14", day: "é€±å…­", city: "è–©çˆ¾æ–¯å ¡", 
                    hotel: "Altstadt Hotel Hofwirt", 
                    breakfast: "7:00~10:00",
                    startTime: "08:00", endTime: "22:00",
                    timeline: [
                        {
                            id: "1401",
                            time: "07:00",
                            event: "ç±³æ‹‰è²çˆ¾å®®æ•£æ­¥",
                            loc: "Mirabell Gardens",
                            type: "sight",
                            note: "é›»å½±ã€ŠçœŸå–„ç¾ã€‹æ‹æ”åœ°ï¼Œæ—©æ™¨äººç…™è¼ƒç¨€å°‘å¥½æ‹ç…§ã€‚"
                        },
                        {
                            id: "1402",
                            time: "08:30",
                            event: "SPAR è¶…å¸‚æ¡è²·",
                            loc: "SPAR Trujic Salzburg",
                            type: "shop",
                            note: "è²·éš”å¤©åˆé¤",
                            hours:"07:15â€“18:00"
                        },
                        {
                            id: "1403",
                            time: "09:00",
                            event: "è«æœ­ç‰¹æ•…å±…",
                            loc: "mozart's residence",
                            type: "sight",
                            note: "æŒ Salzburg Card å…è²»åƒè§€",
                            hours:"09:00â€“17:30"
                        },
                        {
                            id: "1404",
                            time: "09:40",
                            event: "è«æœ­ç‰¹å‡ºç”Ÿåœ°",
                            loc: "Mozarts Geburtshaus",
                            type: "sight",
                            note: "æŒ Salzburg Card å…è²»åƒè§€\næ ¼ç‰¹èŠå¾·å··å°±åœ¨å‡ºç”Ÿåœ°æ—é‚Šï¼Œå¯ä»¥é †ä¾¿é€›é€›ã€‚",
                            hours:"07:15â€“18:00"
                        },
                        {
                            id: "1405",
                            time: "10:30",
                            event: "è–©çˆ¾æ–¯å ¡ä¸»æ•™å€",
                            loc: "DomQuartier Salzburg",
                            type: "sight",                            
                            note: "éŸ³æ¨‚æœƒå‰å¯ä»¥æ‹ç…§/åƒè§€"
                        },
                        {
                            id: "1406",
                            time: "11:45",
                            event: "è–©çˆ¾æ–¯å ¡å¤§æ•™å ‚ éŸ³æ¨‚æœƒ",
                            loc: "Salzburg Cathedral",
                            type: "music",
                            ticket: [
                                { name: "éŸ³æ¨‚æœƒå…¥å ´ç¥¨-1", url: "https://drive.google.com/file/d/1cAWy-7hJiItvWWDbTyqOJh9HVSAlngZw/view?usp=drive_link" },
                                { name: "éŸ³æ¨‚æœƒå…¥å ´ç¥¨-2", url: "https://drive.google.com/file/d/1zW7Li7I-YLWFtIkF67hdcRLpCsCoFlRp/view?usp=drive_link" }
                            ],
                            note: "ææ—©15åˆ†é˜å…¥å ´",
                            hours:"09:00â€“17:00"
                        },
                        {
                            id: "1407",
                            time: "14:30",
                            event: "æ ¼ç‰¹èŠå¾·å·· é€›è¡—/ä¸‹åˆèŒ¶",
                            loc: "Getreidegasse",
                            type: "food",
                            note: "å¿…çœ‹é‘„éµæ‹›ç‰Œã€‚ä¸‹åˆèŒ¶æ¨è–¦ CafÃ© Tomaselli æˆ– Sacherã€‚"
                        },
                        {
                            id: "1408",
                            time: "18:00",
                            event: "è–©çˆ¾èŒ²å ¡æ™šé¤",
                            loc: "Salzburg Old Town",
                            type: "food",
                            note: "å»ºè­°ææ—©ç”¨é¤ï¼Œä»¥åˆ©éŠœæ¥æ™šä¸Šçš„è¦å¡éŸ³æ¨‚æœƒã€‚"
                        },
                        {
                            id: "1409",
                            time: "20:00",
                            event: "è–©çˆ¾èŒ²è¦å¡ & è«æœ­ç‰¹éŸ³æ¨‚æœƒ",
                            loc: "Hohensalzburg Fortress",
                            type: "music",
                            ticket: [
                            { name: "è–©çˆ¾æ–¯å ¡è¦å¡è«æœ­ç‰¹æœ€ä½³éŸ³æ¨‚æœƒç¥¨", url: "https://drive.google.com/file/d/1y9IGkrxI0QTSYU9rzoWxC-R7-hG2j2C_/view?usp=drive_link" },
                            ], 
                            note: "éœ€æ­ä¹˜çºœè»Šä¸Šå±±ã€‚å¾è¦å¡ä¿¯ç°è–©çˆ¾æ–¯å ¡å¤œæ™¯éå¸¸æ¼‚äº®ã€‚"
                        }
                    ]
                },
                {
                    date: "2/15", day: "é€±æ—¥", city: "åœ‹ç‹æ¹–", 
					hotel: "Altstadt Hotel Hofwirt", 
                    breakfast: "7:00~10:00",
                    startTime: "07:30", endTime: "22:00",
                    timeline: [
						{ 
							id: "1501", 
							time: "07:30", 
							event: "æ­è»Šå»è–©çˆ¾æ–¯å ¡ä¸­å¤®è»Šç«™", 
							loc: "Salzburg Hauptbahnhof", 
							type: "transport", 
							ticket: "", 
							note: "å‡æ—¥æ€•æ²’ä½ç½®åˆ°ç™¼è»Šç«™æ­\nä½¿ç”¨ Salzburg Card" 
						},
                        {
                            id: "1502",
                            time: "08:10",
                            event: "[840å…¬è»Š] è–©çˆ¾æ–¯å ¡ç«è»Šç«™ â†’ åœ‹ç‹æ¹–",
                            loc: "åœ‹ç‹æ¹–",
                            type: "transport",
                            ticket: [
                                { 
                                    name: "840å…¬è»Šæ™‚åˆ»è¡¨", 
                                    url: "https://richard.at/wp-content/uploads/2025/12/FP-SVV-Linie840_Bus840_Salzburg_Hauptbahnhof%E2%80%93Anif%E2%80%93Marktschellenberg%E2%80%93Berchtesgaden%E2%80%93Unterstein%E2%80%93K%C3%B6nigssee%E2%80%93Jennerbahn_WINTERFAHRPLAN_WINTERTIMETABLE_14.12.2025-23.05.2026.pdf" 
                                },
                                {
                                    name: "840ä¸Šè»Šæœˆå°è³‡è¨Š",
                                    url: "https://albus.at/de/linie-840-watzmannexpress-2020/"
                                }
                            ],
                            note: "08:10ç™¼è»Š\n ä¸€æ—¥ç¥¨ 14.1â‚¬ (åªæ”¶ç¾é‡‘)\n å‡æ—¥æœ€æ—©ç­æ¬¡ç‚º 08:10ï¼Œä¸‹ä¸€ç­ç‚º 08:40\nå»ºè­°ååœ¨å³å´ é¢¨æ™¯è¼ƒä½³"
                        },
                        {
                            id: "1503",
                            time: "09:45",
                            event: "æ­ä¹˜åœ‹ç‹æ¹–éŠèˆ¹",
                            loc: "Schifffahrt KÃ¶nigssee",
                            type: "sight",
                            ticket: [
                                {
                                    name: "èˆ¹ç­æ™‚åˆ»è¡¨",
                                    url: "https://www.seenschifffahrt.de/fileadmin/user_upload/Fahrplaene/KS_timetable_winter.pdf"
                                }
                            ],
                            note: "é¸å³é‚Šä½ç½®\nè¿”ç¨‹: æœ€æ™šæ­11:35ç­æ¬¡"
                        },
                        {
                            id: "1504",
                            time: "12:00",
                            event: "è€¶æ‹¿å±±çºœè»Š",
                            loc: "Jennerbahn",
                            type: "sight",
                            ticket: [
                                {
                                    name: "å³æ™‚å½±åƒ",
                                    url: "https://www.jennerbahn.de/en/webcam/"
                                }
                            ],
                            note: "å¯è²·èˆ¹ç¥¨+çºœè»Šå¥—ç¥¨ 56â‚¬",
                            hours:"9:30 ~16:30"
                        },
                        {
                            id: "1505",
                            time: "14:50",
                            event: "è²è¥¿ç‰¹æ–¯åŠ ç™»é¹½ç¤¦",
                            loc: "Salt Mine Berchtesgaden",
                            type: "sight",
                            note: "æœ€æ™šæ­13:56å…¬è»Šå‡ºç™¼",
							ticket: [
								{
									name: "é¹½ç¤¦é–€ç¥¨",
									url: "https://drive.google.com/open?id=1gdQIQYLt0Smsu807PwRZ2cuw0nfmDXPQ"
                                },
                                { 
                                    name: "840å…¬è»Šæ™‚åˆ»è¡¨", 
                                    url: "https://richard.at/wp-content/uploads/2025/12/FP-SVV-Linie840_Bus840_Salzburg_Hauptbahnhof%E2%80%93Anif%E2%80%93Marktschellenberg%E2%80%93Berchtesgaden%E2%80%93Unterstein%E2%80%93K%C3%B6nigssee%E2%80%93Jennerbahn_WINTERFAHRPLAN_WINTERTIMETABLE_14.12.2025-23.05.2026.pdf" 
                                }
							]
                        },
                        {
                            id: "1506",
                            time: "17:45",
                            event: "[840å…¬è»Š] è²è¥¿ç‰¹æ–¯åŠ ç™» â†’ è–©çˆ¾æ–¯å ¡èˆŠåŸå€",
                            loc: "è–©çˆ¾æ–¯å ¡èˆŠåŸå€",
                            type: "transport",
                            note: "æœ€æ™šæ­17:45å…¬è»Šå‡ºç™¼\n ä½¿ç”¨ä¸€æ—¥ç¥¨\n å»ºè­°ååœ¨å·¦å´ é¢¨æ™¯è¼ƒä½³",
                            ticket: [
                                { 
                                    name: "840å…¬è»Šæ™‚åˆ»è¡¨", 
                                    url: "https://richard.at/wp-content/uploads/2025/12/FP-SVV-Linie840_Bus840_Salzburg_Hauptbahnhof%E2%80%93Anif%E2%80%93Marktschellenberg%E2%80%93Berchtesgaden%E2%80%93Unterstein%E2%80%93K%C3%B6nigssee%E2%80%93Jennerbahn_WINTERFAHRPLAN_WINTERTIMETABLE_14.12.2025-23.05.2026.pdf" 
                                }
                            ]
                        },
						{
                            id: "1507",
                            time: "18:00",
                            event: "è–©çˆ¾èŒ²å ¡æ™šé¤",
                            loc: "Salzburg Old Town",
                            type: "food",
                            note: ""
                        },
						{
                            id: "1508",
                            time: "20:00",
                            event: "åƒ§ä¾¶å±±é›»æ¢¯ æ¬£è³å¤œæ™¯",
                            loc: "åƒ§ä¾¶å±±é›»æ¢¯",
                            type: "sight",
                            note: "",
							hours: "08:00 ~ 21:00"
                        },
                    ]
                },
                {
                    date: "2/16",
                    day: "é€±ä¸€",
                    city: "è–©çˆ¾æ–¯å ¡ â†’ å“ˆä¿®å¡”ç‰¹",
                    startTime: "08:30",
                    endTime: "20:00",
                    hotel: "å“ˆä¿®å¡”ç‰¹æ­·å²é…’åº— Heritage Hotel Hallstatt",
                    breakfast: "7:00~10:00",
                    hotelTicket: "https://drive.google.com/file/d/1RDgacFdGlVSxtcT7mtrbzKzTclPSz0q-/view?usp=drive_link", 
                    timeline: [
                        {
                            id: "1601",
                            time: "09:00",
                            event: "æº«ç‰¹å±±çºœè»Š (å£¯è§€é˜¿çˆ¾å‘æ–¯å±±æ™¯)",
                            loc: "Untersbergbahn",
                            type: "sight",
                            hours: "09:00 - 16:00",
                            note: "1. æ­ä¹˜å…¬è»Š 25 è™Ÿç›´é”çºœè»Šç«™ã€‚\n2. è–©çˆ¾æ–¯å ¡å¡(Salzburg Card)å¯å…è²»æ­ä¹˜ã€‚\n3. ç™»é ‚å‰è«‹å…ˆçœ‹å³æ™‚å½±åƒç¢ºèªå¤©æ°£ã€‚",
                            ticket: [{name: "å³æ™‚å½±åƒ", url:"https://www.untersbergbahn.at/en" }]
                        },
                        {
                            id: "1602",
                            time: "12:00",
                            event: "åˆé¤ / å›é£¯åº—å–è¡Œæ",
                            loc: "Salzburg Old Town",
                            type: "food",
                            note: "å»ºè­°åœ¨è€åŸå€ç°¡å–®ç”¨é¤å¾Œï¼Œå› Hofwirt é£¯åº—é ˜å–è¡Œæã€‚"
                        },
                        {
                            id: "1603",
                            time: "13:45",
                            event: "æ­ä¹˜å…¬è»Š 150 å‰å¾€ Bad Ischl",
                            loc: "Salzburg Hofwirt (Bus 150)",
                            type: "transport",
                            note: `1. ä½¿ç”¨ Salzburg Guest Mobility Ticket (å«è“‹æ­¤è·¯æ®µ)ã€‚\n2. è»Šç¨‹ç´„ 1.5 å°æ™‚ï¼Œæ²¿é€”æ¹–å…‰å±±è‰²éå¸¸æ¼‚äº®(å»ºè­°åå·¦å´)`
                        },
                        {
                            id: "1604",
                            time: "14:14",
                            event: "æŠµé” Bad Ischl è½‰ä¹˜å‰å¾€å“ˆä¿®å¡”ç‰¹",
                            loc: "Bad Ischl Bahnhof",
                            type: "transport",
                            note: `è½‰ä¹˜æ–¹æ¡ˆï¼š\nA. å„ªå…ˆï¼šå…¬è»Š 541 è½‰ 543 (éŠœæ¥è¼ƒæº–ç¢º)\nB. å‚™é¸ï¼šç«è»Š R70 å¾€ Hallstatt ç«™å†è½‰äº¤é€šèˆ¹ (éœ€ç¢ºèªéµè·¯æ–½å·¥ç‹€æ…‹)`,
                            ticket: []
                        },
                        {
                            id: "1605",
                            time: "16:00",
                            event: "æŠµé”å“ˆä¿®å¡”ç‰¹ & é£¯åº— Check-in",
                            loc: "Heritage Hotel Hallstatt",
                            type: "hotel",
                            ticket: "https://drive.google.com/file/d/1RDgacFdGlVSxtcT7mtrbzKzTclPSz0q-/view?usp=drive_link",
                            note: "æˆ‘å€‘ä½åœ¨ä¸»æ£Ÿã€‚"
                        },
                        {
                            id: "1606",
                            time: "18:00",
                            event: "é£¯åº—é¤å»³æ™šé¤",
                            loc: "Heritage Hotel Restaurant",
                            type: "food",
                            note: "äº«ç”¨æ¹–ç•”é¤å»³æ™šé¤ï¼Œå»ºè­°å…ˆè«‹é£¯åº—æ«ƒæª¯é ç´„é çª—ä½ã€‚"
                        },
                        {
                            id: "1607",
                            time: "20:00",
                            event: "é£¯åº—æ¡‘æ‹¿æ”¾é¬†æ™‚åˆ»",
                            loc: "Hotel Sauna",
                            type: "hotel",
                            note: "ç´“è§£ç§»å‹•æ—¥çš„ä¸€èº«ç–²å‹ï¼Œæ¡‘æ‹¿å€éœ€æ³¨æ„é–‹æ”¾æ™‚é–“èˆ‡è¦ç¯„ã€‚"
                        }
                    ]
                },
                {
                    date: "2/17",
                    day: "é€±äºŒ",
                    city: "å“ˆä¿®å¡”ç‰¹ â†’ åº«å€«æ´›å¤«",
                    startTime: "07:30",
                    endTime: "21:30",
                    hotel: "Hotel DvoÅ™Ã¡k ÄŒeskÃ½ Krumlov", 
                    hotelTicket: "https://drive.google.com/file/d/19P7KP2gehFFk0Ec_6f2z5LQZ5tCpwiQE/view?usp=drive_link",
                    breakfast: "07:30 - 10:30",
                    hotelNote: `1. é£¯åº—ä½æ–¼è€åŸå€å…¥å£è™•ï¼Œé è¿‘å½©ç¹ªå¡”ã€‚\n2. é£¯åº—æä¾›ä»£å«è¨ˆç¨‹è»Šæœå‹™(éš”å¤©å»å·´å£«ç«™å¯ç”¨)ã€‚`,
                    timeline: [
                        {
                            id: "1701",
                            time: "09:00",
                            event: "å“ˆä¿®å¡”ç‰¹æ™¨é–“éŠè¦½",
                            loc: "Hallstatt Old Town",
                            type: "sight",
                            note: "æŠŠæ¡æ—©æ™¨éŠå®¢è¼ƒå°‘æ™‚å‰å¾€ã€Œç¶“å…¸æ‹ç…§é»(Classic View)ã€æ‹ç…§ï¼Œé¿é–‹äººæ½®ã€‚"
                        },
                        {
                            id: "1702",
                            time: "12:00",
                            event: "å“ˆä¿®å¡”ç‰¹åˆé¤ / æº–å‚™é€€æˆ¿",
                            loc: "Hallstatt Lahn",
                            type: "food",
                            note: "å»ºè­°åœ¨ Lahn ç¢¼é ­é™„è¿‘ç°¡å–®ç”¨é¤ï¼Œæ–¹ä¾¿æº–æ™‚å‰å¾€æ¥é§è»Šé›†åˆé»ã€‚"
                        },
                        {
                            id: "1703",
                            time: "13:30",
                            event: "CK Shuttle é›†åˆ (å‰å¾€ CK å°é®)",
                            loc: "Hallstatt Lahn (åœè»Šå ´/å·´å£«ç«™)",
                            type: "transport",
                            note: `é›†åˆåº§æ¨™ï¼š47Â° 33' 23.2" N, 13Â° 38' 45.9" E \n* è«‹æå‰ 10-15 åˆ†é˜æŠµé”ã€‚ \n* å¸æ©Ÿæœƒåœ¨ Lahn å·´å£«ç«™é™„è¿‘çš„å€™è»Šå€æ‰¾äººã€‚`,
                            ticket: "https://drive.google.com/file/d/1EvtbCajFnR9L3kAUeus3tWeLP29TeAKJ/view?usp=drive_link"
                        },
                        {
                            id: "1704",
                            time: "16:30",
                            event: "æŠµé” CK å°é® & é£¯åº—å…¥ä½",
                            loc: "Hotel DvoÅ™Ã¡k ÄŒeskÃ½ Krumlov",
                            type: "hotel",
                            note: "æ¥é§è»Šé€šå¸¸æœƒé€é”é£¯åº—é–€å£æˆ–è€åŸå…¥å£ï¼ŒCheck-in å¾Œç¨ä½œä¼‘æ¯ã€‚",
                            ticket: "https://drive.google.com/file/d/19P7KP2gehFFk0Ec_6f2z5LQZ5tCpwiQE/view?usp=drive_link"
                        },
                        {
                            id: "1705",
                            time: "17:30",
                            event: "CK å°é®é»ƒæ˜éŠè¦½",
                            loc: "ÄŒeskÃ½ Krumlov Old Town",
                            type: "sight",
                            note: "æ­¤æ™‚å½©ç¹ªå¡”æœƒæ‰“ç‡ˆï¼Œè€åŸå€çš„å¤œæ™¯éå¸¸é©åˆæ•£æ­¥ã€‚"
                        },
                        {
                            id: "1706",
                            time: "19:30",
                            event: "åœ°çª–é¤å»³æ™šé¤ (KrÄma Å atlava)",
                            loc: "KrÄma v Å atlavskÃ© ulici",
                            type: "food",
                            note: "é ç´„ 19:30ã€‚æ¨è–¦ï¼šç‚­çƒ¤è±¬è…³ã€çƒ¤æ´‹è”¥æ¹¯ã€æ·å…‹é»‘å•¤é…’ã€‚",
                            ticket: "http://www.satlava.cz/"
                        }
                    ]
                },
                {
                    date: "2/18",
                    day: "é€±ä¸‰",
                    city: "åº«å€«æ´›å¤« â†’ å¸ƒæ‹‰æ ¼",
                    breakfast: "7:30 ~ 10:00",
                    startTime: "09:00",
                    endTime: "21:30",
                    hotel: "å¸åœ‹é…’åº— Art Deco Imperial Hotel",
                    breakfast: "07:00 - 10:00",
                    hotelTicket: "https://drive.google.com/file/d/1IwX-XcgKfdIVtyb319InSfns-UooQDbz/view?usp=drive_link",
                    hotelNote: `1. å¸åœ‹é…’åº—ä½æ–¼å¸ƒæ‹‰æ ¼ 1 å€ï¼Œåœ°ç†ä½ç½®å„ªè¶Šã€‚\n2. é£¯åº—è‘—åçš„ Cafe Imperial æ—©é¤éå¸¸æœ‰åï¼Œæ˜å¤©å¯ä»¥æœŸå¾…ã€‚`,
                    timeline: [
                        {
                            id: "1801",
                            time: "09:30",
                            event: "æ·å…‹å…‹é­¯å§†æ´›å¤«åŸå ¡",
                            loc: "StÃ¡tnÃ­ hrad a zÃ¡mek ÄŒeskÃ½ Krumlov",
                            type: "sight",
                            hours: "9.00 â€“ 15.30 (å‘¨ä¸€é–‰é¤¨)",
                            ticket: [{name: "ä¸­æ–‡éŠè¨˜ - åŸå ¡ä»‹ç´¹", url: "https://www.leo-travel.idv.tw/45814/czech-cesky-krumlov-castle-guide"}],
                            note: "æ·å…‹é™¤å¸ƒæ‹‰æ ¼åŸå ¡å¤–æœ€å¤§çš„å¤å ¡ï¼Œå¿…çœ‹å½©ç¹ªå¡”ä¿¯ç°å°é®å…¨æ™¯ã€‚\nå†¬å­£åŸå ¡å¤šè™•åœ°å€æœªé–‹æ”¾ï¼Œåˆ°æ™‚å†æ±ºå®šæ˜¯å¦è²·ç¥¨ä¸Šå½©ç¹ªå¡”&åƒè§€åšç‰©é¤¨(CZK280)"
                        },
                        {
                            id: "1802",
                            time: "12:00",
                            event: "CK å°é®åˆé¤",
                            loc: "ÄŒeskÃ½ Krumlov Old Town",
                            type: "food",
                            note: "å»ºè­°åœ¨ä¼çˆ¾å¡”ç“¦æ²³ç•”ç”¨é¤ï¼Œä¸‹åˆ 13:30 å‰éœ€å•Ÿç¨‹å‰å¾€å·´å£«ç«™ã€‚"
                        },
                        {
                            id: "1803",
                            time: "14:00",
                            event: "æ­ä¹˜ FlixBus å‰å¾€å¸ƒæ‹‰æ ¼",
                            loc: "AutobusovÃ© nÃ¡draÅ¾Ã­ ÄŒeskÃ½ Krumlov",
                            type: "transport",
                            note: `*ç¥¨æœ‰åŠ å…¥appéŒ¢åŒ…\n1. è«‹æå‰ 15 åˆ†é˜æŠµé”å·´å£«ç«™ã€‚\n2. è»Šç¨‹ç´„ 3 å°æ™‚ï¼Œçµ‚é»ç‚ºå¸ƒæ‹‰æ ¼ Florenc ç«™ã€‚`,
                            ticket: [
                                {
                                    name: "FlixBusè»Šç¥¨",
                                    url:"https://drive.google.com/file/d/1EucXpj9Up9pHSBMfIiCPgRhWmA5L9J8t/view?usp=drive_link"
                                }
                            ]
                        },
                        {
                            id: "1804",
                            time: "17:00",
                            event: "æŠµé”å¸ƒæ‹‰æ ¼ Florenc ç«™",
                            loc: "Prague Main Bus Terminal (Florenc)",
                            type: "transport",
                            note: "æŠµé”å¾Œå»ºè­°æ­ä¹˜è¨ˆç¨‹è»Šæˆ–è·¯é¢é›»è»Šå‰å¾€é£¯åº—ï¼Œç´„ 10 åˆ†é˜è·¯ç¨‹ã€‚"
                        },
                        {
                            id: "1805",
                            time: "17:10",
                            event: "å¸åœ‹é…’åº— Check-in",
                            loc: "Art Deco Imperial Hotel",
                            type: "hotel",
                            note: "é€™å®¶é£¯åº—æ˜¯ä¸–ç•Œç´šçš„æ­·å²å»ºç¯‰ï¼Œå¤§å»³çš„é™¶ç“·è£é£¾éå¸¸å£¯è§€ã€‚",
                            ticket: "https://drive.google.com/file/d/1IwX-XcgKfdIVtyb319InSfns-UooQDbz/view?usp=drive_link"
                        },
                        {
                            id: "1806",
                            time: "18:00",
                            event: "å¸ƒæ‹‰æ ¼æ™šé¤",
                            loc: "Prague Old Town",
                            type: "food",
                            note: "å›  19:00 è¦çœ‹æ­ŒåŠ‡ï¼Œå»ºè­°åœ¨åŠ‡é™¢é™„è¿‘ç°¡å–®ç”¨é¤æˆ–åƒè¼•é£Ÿã€‚"
                        },
                        {
                            id: "1807",
                            time: "19:00",
                            event: "å¸ƒæ‹‰æ ¼åœ‹å®¶åŠ‡é™¢ï¼šã€Šå¡é–€ã€‹",
                            loc: "National Theatre (NÃ¡rodnÃ­ divadlo)",
                            type: "music",
                            hours: "19:00 é–‹å§‹",
                            note: "1. è«‹è‘—æ­£å¼æˆ–æ•´æ½”æœè£å…¥å ´ã€‚\n2. æ¼”å‡ºåŒ…å«ä¸­å ´ä¼‘æ¯ï¼Œç¸½é•·ç´„ 3 å°æ™‚ã€‚",
                            ticket: [
                                {
                                    name: "å¡é–€ é–€ç¥¨",
                                    url:"https://drive.google.com/file/d/15QkruRFxibCttRCNPgTIVWS-MFUVVwMK/view?usp=drive_link"
                                }
                            ]
                        }
                    ]
                },
                {
                    date: "2/19", day: "é€±å››", city: "å¸ƒæ‹‰æ ¼", hotel: "Grandium Hotel Prague", startTime: "09:00", timeline: [
                        { id: "1901", time: "09:00", event: "æŸ¥ç†å¤§æ©‹", loc: "Charles Bridge", type: "sight", ticket: "", note: "" },
                        { id: "1902", time: "10:30", event: "å¤©æ–‡é˜", loc: "Old Town Square", type: "sight", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/20", day: "é€±äº”", city: "å¸ƒæ‹‰æ ¼", hotel: "Grandium Hotel Prague", startTime: "09:00", timeline: [
                        { id: "2001", time: "09:00", event: "å¸ƒæ‹‰æ ¼åŸå ¡", loc: "Prague Castle", type: "sight", ticket: "", note: "" },
                        { id: "2002", time: "10:30", event: "è–ç¶­ç‰¹å¤§æ•™å ‚", loc: "St. Vitus Cathedral", type: "sight", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/21", day: "é€±å…­", city: "å¸ƒé”ä½©æ–¯", hotel: "Hotel NH Collection Budapest", startTime: "09:00", timeline: [
                        { id: "2101", time: "09:00", event: "ç«è»Šå¾€å¸ƒé”ä½©æ–¯", loc: "Prague Main Station", type: "transport", ticket: "", note: "" },
                        { id: "2102", time: "16:00", event: "ç´ç´„å’–å•¡é¤¨", loc: "New York CafÃ©", type: "food", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/22", day: "é€±æ—¥", city: "å¸ƒé”ä½©æ–¯", hotel: "Hotel NH Collection Budapest", startTime: "09:00", timeline: [
                        { id: "2201", time: "09:00", event: "è–ä¼Šä»€ç‰¹è¬è–æ®¿", loc: "St. Stephen's Basilica", type: "sight", ticket: "", note: "" },
                        { id: "2202", time: "18:00", event: "å¤šç‘™æ²³éŠèˆ¹", loc: "Danube River Budapest", type: "food", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/23", day: "é€±ä¸€", city: "å¸ƒé”ä½©æ–¯", hotel: "Novotel Budapest Danube", startTime: "09:00", timeline: [
                        { id: "2301", time: "09:00", event: "æ¼äººå ¡", loc: "Fisherman's Bastion", type: "sight", ticket: "", note: "" },
                        { id: "2302", time: "19:00", event: "åœ‹æœƒå¤§å»ˆå¤œæ™¯", loc: "Hungarian Parliament Building", type: "sight", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/24", day: "é€±äºŒ", city: "ç¶­ä¹Ÿç´", hotel: "Novotel Wien Hauptbahnhof", startTime: "09:00", timeline: [
                        { id: "2401", time: "09:00", event: "ç«è»Šå¾€ç¶­ä¹Ÿç´", loc: "Budapest Keleti", type: "transport", ticket: "", note: "" },
                        { id: "2402", time: "13:00", event: "ç†Šå¸ƒæœ—å®®", loc: "SchÃ¶nbrunn Palace", type: "sight", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/25", day: "é€±ä¸‰", city: "ç¶­ä¹Ÿç´", hotel: "Novotel Wien Hauptbahnhof", startTime: "09:00", timeline: [
                        { id: "2501", time: "09:00", event: "éœå¤«å ¡çš‡å®®", loc: "Hofburg", type: "sight", ticket: "", note: "" },
                        { id: "2502", time: "16:00", event: "ä¸­å¤®å’–å•¡é¤¨", loc: "CafÃ© Central", type: "food", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/26", day: "é€±å››", city: "ç¶­ä¹Ÿç´", hotel: "Novotel Wien Hauptbahnhof", startTime: "09:00", timeline: [
                        { id: "2601", time: "09:00", event: "ç™¾æ°´å…¬å¯“", loc: "Hundertwasserhaus", type: "sight", ticket: "", note: "" },
                        { id: "2602", time: "18:00", event: "ç¶­ä¹Ÿç´è‚‹æ’", loc: "Ribs of Vienna", type: "food", ticket: "", note: "" }
                    ]
                },
                {
                    date: "2/27", day: "é€±äº”", city: "è¿”ç¨‹", hotel: "é£›æ©Ÿä¸Š", startTime: "09:00", timeline: [
                        { id: "2701", time: "20:00", event: "å‰å¾€æ©Ÿå ´", loc: "Vienna International Airport", type: "transport", ticket: "", note: "" },
                        { id: "2702", time: "23:25", event: "æ­æ©Ÿè¿”å°", loc: "VIE Airport", type: "flight", ticket: "", note: "" }
                    ]
                }
            ];
    
            // ================= CITY GUIDE DATA =================
            const cityGuides = {
                munich: {
                    title: "æ…•å°¼é»‘ Munich",
                    img: "./img/Munich.jpg",
                    intro: "å¾·åœ‹å·´ä¼åˆ©äºé‚¦é¦–åºœï¼Œä¹Ÿæ˜¯å•¤é…’ç¯€çš„æ•…é„‰ã€‚é€™è£¡æœ‰å¤è€çš„å»ºç¯‰ã€è±ªé‚çš„è±¬è…³èˆ‡å•¤é…’ã€‚",
                    spots: ["ç‘ªéº—äºå»£å ´", "çš‡å®¶å•¤é…’å±‹", "æ…•å°¼é»‘ç‹å®®"],
                    food: ["å¾·åœ‹è±¬è…³ (Haxn)", "ç™½é¦™è…¸ (Weisswurst)", "ä¸€å…¬å‡å•¤é…’"],
                    shop: ["Rimowa è¡Œæç®±", "ç™¾éˆæ²¹ (China Oel)", "DMè—¥å¦"],
                    tips: "åœ°éµç¥¨é€²ç«™å‰å‹™å¿…åœ¨æ‰“ç¥¨æ©Ÿæ‰“å¡ï¼Œå¦å‰‡è¦–ç‚ºé€ƒç¥¨ã€‚",
                    restaurants: []
                },
                salzburg: {
                    title: "è–©çˆ¾æ–¯å ¡ Salzburg",
                    img: "./img/Salzburg.jpg",
                    intro: "è«æœ­ç‰¹çš„æ•…é„‰ï¼Œä¹Ÿæ˜¯é›»å½±ã€ŠçœŸå–„ç¾ã€‹çš„æ‹æ”åœ°ã€‚æ•´å€‹èˆŠåŸå€å„ªé›…è€Œå……æ»¿è—è¡“æ°£æ¯ã€‚",
                    spots: ["ç±³æ‹‰è²çˆ¾å®®", "è–©çˆ¾æ–¯å ¡è¦å¡", "æ ¼ç‰¹èŠå¾·å··"],
                    food: ["è–©çˆ¾æ–¯å ¡èˆ’èŠ™è•¾ (Nockerl)", "Bosna å’–å“©é¦™è…¸å ¡"],
                    restaurants: [
                        { 
                            name: "â˜• CafÃ© Tomaselli (è€ç‰Œå’–å•¡é¤¨)", 
                            note: "å¥§åœ°åˆ©æœ€å¤è€å’–å•¡å»³ã€‚æ¨è–¦ï¼šç”±æœå‹™ç”Ÿç«¯æ‰˜ç›¤è‡ªé¸è›‹ç³•ï¼Œè«æœ­ç‰¹ä¹Ÿæ„›é€™å®¶ã€‚",
                            map: "https://maps.app.goo.gl/HT8x6i5jLgBQEMCh6"
                        },
                        { 
                            name: "ğŸ° CafÃ© Sacher (è–©èµ«è›‹ç³•)", 
                            note: "å¿…é»åœ‹å¯¶ç´šã€è–©èµ«å·§å…‹åŠ›è›‹ç³•ã€ã€‚ç’°å¢ƒæ¯”ç¶­ä¹Ÿç´åˆ†åº—èˆ’é©ï¼Œå°±åœ¨æ²³ç•”æ—ã€‚",
                            map: "https://maps.app.goo.gl/u4GRuzRqG9P7Lh447"
                        },
                        { 
                            name: "ğŸŒ­ Balkan Grill (å¿…åƒæ’éšŠç†±ç‹—)", 
                            note: "æ ¼ç‰¹èŠå¾·å··å¼„å…§çš„å°æ”¤ä½ï¼Œç•¶åœ°æœ€æœ‰åçš„å¹³åƒ¹é»å¿ƒï¼Œé¹¹é¦™è§£è†©ã€‚",
                            map: "https://maps.app.goo.gl/FSCPRkuhmBiF3rt48"
                        },
                        { 
                            name: "ğŸ½ï¸ St. Peter Stiftskulinarium", 
                            note: "æ­æ´²æœ€å¤è€é¤å»³(è¥¿å…ƒ803å¹´)ã€‚æ°£æ°›æ¥µä½³ï¼Œé©åˆæƒ³é«”é©—ç²¾ç·»å¥§åœ°åˆ©èœçš„é•·è¼©ã€‚",
                            map: "https://maps.app.goo.gl/AqL7pibQKkTWBdY76"
                        },
                        { 
                            name: "ğŸº SternbrÃ¤u (å¹³åƒ¹èˆ’é©é¤å»³)", 
                            note: "ç©ºé–“å¯¬æ•ã€æœ‰è‡ªå·±çš„é‡€é…’å» ã€‚èœè‰²å¤šæ¨£åŒ–ï¼Œç‚¸ç‰›æ’èˆ‡æ‰‹å·¥å•¤é…’è©•åƒ¹å¾ˆé«˜ã€‚",
                            map: "https://maps.app.goo.gl/52vKpT5ANhzsnJDG6"
                        }
                    ],
                    shop: ["è«æœ­ç‰¹å·§å…‹åŠ› (éŠ€è—è‰²åŒ…è£æœ€æ­£çµ±)", "å²©é¹½"],
                    tips: "è³¼è²· Salzburg Card éå¸¸åˆ’ç®—ï¼ŒåŒ…å«äº¤é€šèˆ‡æ™¯é»é–€ç¥¨ã€‚"
                },
                hallstatt: {
                    title: "å“ˆä¿®å¡”ç‰¹ Hallstatt",
                    img: "./img/Hallstatt.jpg",
                    intro: "è¢«è­½ç‚ºã€Œä¸–ç•Œæœ€ç¾å°é®ã€ï¼Œä¾å±±å‚æ°´ï¼Œå®›å¦‚ç«¥è©±ä»™å¢ƒã€‚",
                    spots: ["æ˜ä¿¡ç‰‡è§€æ™¯é»", "å¤è€é¹½ç¤¦", "äººéª¨æ•™å ‚"],
                    food: ["çƒ¤é±’é­š (ä¾†è‡ªå“ˆä¿®å¡”ç‰¹æ¹–)", "å¥¶æ²¹æ²"],
                    shop: ["æ‰‹å·¥é¹½ç½", "æœ¨è£½å·¥è—å“"],
                    tips: "éŠå®¢éå¸¸å¤šï¼Œå»ºè­°æ¸…æ™¨æˆ–å‚æ™šæ•£æ­¥æœ€èˆ’æœã€‚",
                    restaurants: [
                        { 
                            name: "ğŸŸ Seehotel GrÃ¼ner Baum", 
                            note: "æœ€ç¾æ¹–ç•”éœ²å°ï¼Œæ¨è–¦ç¾æ’ˆçƒ¤é±’é­šã€‚å»ºè­°é ç´„é¢æ¹–ä½ã€‚",
                            map: "https://www.google.com/maps/search/?api=1&query=Seehotel+GrÃ¼ner+Baum+Hallstatt"
                        },
                        { 
                            name: "ğŸ´ Restaurant Im Kainz", 
                            note: "Heritage Hotel é™„è¨­é¤å»³ï¼Œå“è³ªç©©å®šï¼Œç‚¸ç‰›æ’å¾ˆé“åœ°ã€‚",
                            map: "https://www.google.com/maps/search/?api=1&query=Restaurant+Im+Kainz+Hallstatt"
                        },
                        { 
                            name: "ğŸ¥¨ Maislinger", 
                            note: "ç•¶åœ°äººä¹Ÿæ„›çš„ç™¾å¹´éºµåŒ…åº—ï¼Œæ¨è–¦å‚³çµ±æ‰­çµé¤…èˆ‡å°è›‹ç³•ã€‚",
                            map: "https://www.google.com/maps/search/?api=1&query=BÃ¤ckerei+Maislinger+Hallstatt"
                        },
                        { 
                            name: "ğŸº Brauhaus Lobisser", 
                            note: "é“åœ°å¾·å¥§é…’é¤¨ï¼Œæœ‰å¾ŒèŠ±åœ’ã€‚çƒ¤è±¬è…³èˆ‡å•¤é…’çš„å®Œç¾çµ„åˆã€‚",
                            map: "https://maps.app.goo.gl/6PuNCk2J7mtSu3MAA"
                        },
                        { 
                            name: "ğŸ” Karmez Kebap Cart", 
                            note: "ç¢¼é ­æ—çš„è¶…äººæ°£å°æ”¤ä½ï¼Œæ²é¤…ä¾¿å®œåˆå¤§ä»½ï¼Œé©åˆæ¹–é‚Šé‡é¤ã€‚",
                            map: "https://www.google.com/maps/search/?api=1&query=Karmez+Kebap+Cart+Hallstatt"
                        }
                    ]
                },
                ck: {
                    title: "åº«å€«æ´›å¤« CK",
                    img: "./img/ck.jpg",
                    intro: "æ³¢è¥¿ç±³äºç«¥è©±å°é®ã€‚ä¼çˆ¾å¡”ç“¦æ²³å‘ˆSå‹èœ¿èœ’æµéï¼Œæ©˜ç´…è‰²çš„å±‹é ‚æ˜¯é€™è£¡çš„æ¨™èªŒã€‚",
                    spots: ["å½©ç¹ªå¡”", "åŸå ¡æ©‹å»Š", "æ–—ç¯·æ©‹ (Cloak Bridge)", "åœ°çª–é¤å»³"],
                    food: ["åœ°çª–çƒ¤è‚‰", "è‚‰æ¡‚ç…™å›ªæ² (TrdelnÃ­k)", "é›è›‹è–„é¤… (PalaÄinka)"],
                    shop: ["è ä¸¹å¦® (Botanicus) æ‰‹å·¥çš‚", "åˆºèŸç­†"],
                    tips: "å…¨åŸéƒ½æ˜¯çŸ³æ¿è·¯ï¼Œéå¸¸é›£æ‹–è¡Œæï¼Œè«‹è¼•è£ç°¡è¡Œã€‚",
                    restaurants: [
                        { 
                            name: "ğŸ¥© KrÄma Å atlava (ç¶“å…¸åœ°çª–é¤å»³)", 
                            note: "å‚³çµ±æ·å…‹æ–™ç†ï¼Œç’°å¢ƒåƒä¸­ä¸–ç´€é…’é¤¨ã€‚æ¨è–¦ï¼šçƒ¤è±¬è…³ã€æ´‹è”¥æ¹¯ã€‚å®¤å…§æš–æ°£è¶³ï¼Œé©åˆå†¬å¤©ç”¨é¤ã€‚",
                            map: "https://maps.app.goo.gl/bgJHtY3Nvqsgt65R9"
                        },
                        { 
                            name: "ğŸ¥¨ MLS CrÃªperie (é›è›‹è–„é¤…/è‚‰æ¡‚æ²)", 
                            note: "ç¾å ´è£½ä½œæ·å…‹å‚³çµ±å°åƒ TrdelnÃ­k (ç…™å›ªæ²)ï¼Œç†±é¨°é¨°çš„è‚‰æ¡‚é¦™æ°£åœ¨å†¬å¤©åƒèµ·ä¾†æ ¼å¤–å¹¸ç¦ã€‚",
                            map: "https://maps.app.goo.gl/unrwDzZY51CSi3CC8"
                        },
                    ]
                },
                prague: {
                    title: "å¸ƒæ‹‰æ ¼ Prague",
                    img: "./img/prague.jpg",
                    intro: "æ·å…‹é¦–éƒ½ï¼Œåƒå¡”ä¹‹åŸã€‚æ“æœ‰å¤è€çš„æ©‹æ¨‘ã€æ•™å ‚å’Œé‡‘è‰²å¡”æ¨“ã€‚",
                    spots: ["æŸ¥ç†å¤§æ©‹", "å¤©æ–‡é˜", "å¸ƒæ‹‰æ ¼åŸå ¡"],
                    food: ["çƒ¤é´¨ä½ç´«ç”˜è—", "çš®çˆ¾æ£®å•¤é…’"],
                    shop: ["æ›¼è²è˜¿ (Manufaktura) å•¤é…’èŠ±ä¿é¤Šå“", "æ°´æ™¶ç»ç’ƒ"],
                    tips: "äººå¤šçš„åœ°æ–¹(å¦‚æŸ¥ç†å¤§æ©‹)è«‹å‹™å¿…å°‡èƒŒåŒ…èƒŒåœ¨å‰é¢ï¼Œå°å¿ƒæ‰’æ‰‹ã€‚",
                    restaurants: []
                },
                budapest: {
                    title: "å¸ƒé”ä½©æ–¯ Budapest",
                    img: "./img/budapest.jpg",
                    intro: "å¤šç‘™æ²³æ˜ç ï¼Œç”±å¸ƒé”èˆ‡ä½©æ–¯çµ„æˆã€‚å¤œæ™¯é‡‘ç¢§è¼ç…Œï¼Œè¢«è­½ç‚ºæ­æ´²æœ€ç¾ã€‚",
                    spots: ["æ¼äººå ¡", "åœ‹æœƒå¤§å»ˆ", "å¡åˆ‡å°¼æº«æ³‰"],
                    food: ["åŒˆç‰™åˆ©ç‰›è‚‰æ¹¯ (Goulash)", "éµè‚æ–™ç†"],
                    shop: ["ç´…æ¤’ç²‰ (Paprika)", "è²´è…é…’ (Tokaji)"],
                    tips: "åœ°éµæ‰‹æ‰¶æ¢¯é€Ÿåº¦éå¸¸å¿«ï¼Œæ­ä¹˜æ™‚è«‹æ¡ç·Šæ‰¶æ‰‹ã€‚",
                    restaurants: []
                },
                vienna: {
                    title: "ç¶­ä¹Ÿç´ Vienna",
                    img: "./img/vienna.jpg",
                    intro: "å¥§åœ°åˆ©é¦–éƒ½ï¼Œæ˜”æ—¥å“ˆå¸ƒæ–¯å ¡ç‹æœä¸­å¿ƒã€‚å……æ»¿çš‡å®¶æ°£æ´¾èˆ‡å’–å•¡æ–‡åŒ–ã€‚",
                    spots: ["éœå¤«å ¡", "ç†Šå¸ƒæœ—å®®", "ä¸­å¤®å’–å•¡é¤¨"],
                    food: ["ç¶­ä¹Ÿç´ç‚¸ç‰›æ’ (Schnitzel)", "è–©èµ«è›‹ç³• (Sacher Torte)"],
                    shop: ["Manner å¨åŒ–é¤…", "å°ç´…å¸½å’–å•¡è±†"],
                    tips: "é€±æ—¥å•†åº—å¹¾ä¹å…¨é—œï¼Œæ¡è²·è«‹é¿é–‹é€±æ—¥ã€‚",
                    restaurants: []
                }
            };
    
            const defaultChecklist = [
                { id: 1, text: "è­·ç…§ (æ•ˆæœŸ>6å€‹æœˆ)", done: false },
                { id: 2, text: "æ­å…ƒç¾é‡‘/ä¿¡ç”¨å¡", done: false },
                { id: 3, text: "ç¶²å¡/E-SIM", done: false },
                { id: 4, text: "è½‰æ¥é ­(é›™åœ“å­”)", done: false },
                { id: 5, text: "å¸¸å‚™è—¥å“", done: false }
            ];
    
            // ================= INIT & UTILS =================
            document.addEventListener('DOMContentLoaded', function () {
                // 1. åˆå§‹åŒ–åŠŸèƒ½
                switchTab("plan");
                renderItinerary();
                renderSideTabs();
                loadChecklist();
                
                // 2. åˆå§‹å®šä½åˆ°ä»Šæ—¥è¡Œç¨‹
                scrollToToday();

                // 3. æ™‚é–“å³æ™‚æ›´æ–°é‚è¼¯ (æ¯ç§’æ›´æ–°)
                function updateClock() {
                    const now = new Date();
                    
                    // è¨­å®šæ™‚é–“æ ¼å¼ï¼šæœˆ/æ—¥ æ™‚:åˆ†:ç§’
                    const options = { 
                        month: 'numeric', 
                        day: 'numeric', 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit',
                        hour12: false 
                    };

                    // A. å–å¾—ç•¶åœ°æ™‚é–“ (æ‰‹æ©Ÿç›®å‰æ™‚å€)
                    const localTimeStr = now.toLocaleString('zh-TW', options);

                    // B. å–å¾—å°ç£æ™‚é–“ (å¼·åˆ¶é–å®š Asia/Taipei)
                    const twTimeStr = now.toLocaleString('zh-TW', { ...options, timeZone: 'Asia/Taipei' });

                    // C. å¯«å…¥ HTML
                    const dateElement = document.getElementById('headerDate');
                    
                    // è¨­å®šå®¹å™¨æ’ç‰ˆï¼šé å³å°é½Š (items-end)ã€å‚ç›´æ’åˆ— (flex-col)
                    dateElement.className = "flex flex-col items-end justify-center";
                    
                    // è¨­å®šå…§å®¹ï¼šå…©è¡Œå­—é«”å¤§å°çš†ç‚º text-xs (ç´„12px)ï¼Œä¸¦åŠ ä¸Šç­‰å¯¬å­—é«” font-mono é˜²æ­¢æ•¸å­—è·³å‹•
                    dateElement.innerHTML = `
                        <div class="text-xs font-bold text-gray-600 font-mono text-right">ç•¶åœ° ${localTimeStr}</div>
                        <div class="text-xs text-gray-400 font-mono text-right">å°ç£ ${twTimeStr}</div>
                    `;
                }

                // ç«‹å³åŸ·è¡Œä¸€æ¬¡ï¼Œé¿å…å‰›è¼‰å…¥æ™‚æœ‰ç©ºçª—æœŸ
                updateClock();

                // è¨­å®šè¨ˆæ™‚å™¨ï¼Œæ¯ 1000 æ¯«ç§’ (1ç§’) æ›´æ–°ä¸€æ¬¡
                setInterval(updateClock, 1000);
            });
            
            function switchTab(tabId) {
                // 1. åˆ‡æ›å…§å®¹é¡¯ç¤º
                document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
                document.getElementById('tab-' + tabId).classList.add('active');
                
                // 2. åˆ‡æ›åº•éƒ¨å°è¦½åˆ—æŒ‰éˆ•æ¨£å¼
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                document.querySelector(`.nav-item[data-target="${tabId}"]`).classList.add('active');

                // 3. å–å¾—æ—¥æœŸå°è¦½æŒ‰éˆ•å®¹å™¨
                const dateNav = document.getElementById('mobile-date-nav-container');

                // 4. é¡¯ç¤º/éš±è—é‚è¼¯
                if (tabId === 'plan') {
                    // åªæœ‰åœ¨ã€Œè¡Œç¨‹ã€æ¨¡çµ„æ‰é¡¯ç¤º
                    if (dateNav) dateNav.classList.remove('hidden'); 
                    scrollToToday();
                } else {
                    // å…¶ä»–æ¨¡çµ„ä¸€å¾‹éš±è—ï¼Œä¸¦ç¢ºä¿é¸å–®æ˜¯é—œé–‰ç‹€æ…‹
                    if (dateNav) {
                        dateNav.classList.add('hidden');
                        const menu = document.getElementById('mobile-date-menu');
                        const icon = document.getElementById('menu-icon');
                        if (menu) menu.classList.add('hidden');
                        if (icon) icon.className = 'fas fa-calendar-alt text-xl';
                    }
                    window.scrollTo(0, 0);
                }
            }
    
            function getMapLinkHtml(name) {
                const query = encodeURIComponent(name);
                const url = `https://www.google.com/maps/search/?api=1&query=${query}`;
                return `<a href="${url}" target="_blank" class="map-link inline-flex items-center justify-center text-euro-link ml-1.5 hover:text-euro-primary transition-transform"><i class="fas fa-map-marker-alt text-base"></i></a>`;
            }
    
            // ================= PLAN RENDERING =================
            // å®£å‘Šç›®å‰é¸ä¸­çš„æ—¥æœŸï¼Œé è¨­ç‚ºç¬¬ä¸€å¤©
            let currentDay = itineraryData[0].date; 

            function renderItinerary() {
                const container = document.getElementById('itinerary-list');
                let html = '';
                
                // éæ­·æ‰€æœ‰å¤©æ•¸é€²è¡Œå…¨é‡æ¸²æŸ“ (ä¸€æ¬¡é¡¯ç¤ºæ‰€æœ‰è¡Œç¨‹)
                itineraryData.forEach((item, index) => {
                    let timelineNodes = [];
                    
                    // å–å¾—è©²æ—¥è¨­å®šçš„ èµ·è¨–æ™‚é–“
                    const departureTime = item.startTime || "09:00";
                    const returnTime = item.endTime || "20:00";

                    // 1. è‡ªå‹•åŠ å…¥ã€Œå¾é£¯åº—å‡ºç™¼ã€
                    // æ¢ä»¶ï¼šä¸æ˜¯ç¬¬ä¸€å¤© ä¸” ç¬¬ä¸€å€‹è¡Œç¨‹ä¸æ˜¯ã€Œèµ·é£›ã€
                    if (index > 0 && !item.timeline[0].event.includes("èµ·é£›")) {
                        const prevHotel = itineraryData[index - 1].hotel;
                        timelineNodes.push({
                            id: "start_" + item.date.replace('/',''),
                            time: departureTime,
                            event: `å¾ ${prevHotel} å‡ºç™¼`,
                            loc: prevHotel, 
                            type: "hotel_start",
                            breakfast: item.breakfast || "", 
                            ticket: "", note: ""
                        });
                    }
                    
                    // 2. åŠ å…¥ä¸»è¦è¡Œç¨‹äº‹ä»¶
                    timelineNodes = timelineNodes.concat(item.timeline);
                    
                    // 3. è‡ªå‹•åŠ å…¥ã€Œå›åˆ°é£¯åº—ã€
                    // æ¢ä»¶ï¼šæœ€å¾Œä¸€å€‹è¡Œç¨‹ä¸æ˜¯ã€Œæ­æ©Ÿã€
                    if (!item.timeline[item.timeline.length-1].event.includes("æ­æ©Ÿ")) {
                        timelineNodes.push({
                            id: "end_" + item.date.replace('/',''),
                            time: returnTime, 
                            event: `å›åˆ° ${item.hotel}`, 
                            loc: item.hotel, 
                            type: "hotel_end",
                            ticket: "", note: ""
                        });
                    }

                    // 4. æ¸²æŸ“æ™‚é–“è»¸é …ç›®
                    let timelineHtml = '';
                    timelineNodes.forEach((event, idx) => {
                        const isLast = idx === timelineNodes.length - 1;
                        
                        // è¨­å®šåœ–ç¤ºé‚è¼¯
                        const typeIcons = {
                            flight: 'fa-plane',
                            food: 'fa-utensils',
                            hotel: 'fa-bed',
                            hotel_end: 'fa-bed',
                            hotel_start: 'fa-walking',
                            transport: 'fa-train',
                            music: 'fa-music',
                            sight: 'fa-camera'
                        };
                        const icon = typeIcons[event.type] || 'fa-circle';

                        // è™•ç†é€£çµæ¨™ç¤º
                        const hasStaticLink = !!event.ticket;
                        const customLinksRaw = localStorage.getItem('ticket_custom_links_' + event.id);
                        const hasCustomLink = (customLinksRaw && customLinksRaw !== '[]');
                        const showLinkIcon = hasStaticLink || hasCustomLink;
                        const linkIconHtml = showLinkIcon ? '<i class="fas fa-link text-euro-secondary ml-1.5 text-xs"></i>' : '';
                        
                        // è™•ç†å‚™è¨»é¡¯ç¤º
                        const localNote = localStorage.getItem('ticket_note_' + event.id);
                        const finalNote = (localNote && localNote.trim() !== "") ? localNote : (event.note || "");
                        const noteBlockHtml = (finalNote && finalNote.trim() !== "") 
                            ? `<div class="text-[11px] text-gray-500 mt-1.5 flex items-start leading-relaxed bg-gray-50 p-2 rounded border-l-2 border-gray-200 whitespace-pre-wrap">
                                <i class="fas fa-pen text-[9px] mt-1 mr-2 opacity-50"></i>
                                <div class="flex-1">${finalNote}</div>
                            </div>` : '';

                        const mapIconHtml = getMapLinkHtml(event.loc);
                        const showBtn = (event.type !== 'hotel_start');
                        const hoursHtml = event.hours ? `<div class="text-[10px] text-gray-400 flex items-center mt-0.5"><i class="far fa-clock mr-1 text-[9px]"></i>${event.hours}</div>` : '';
                        const breakfastHtml = (event.type === 'hotel_start' && event.breakfast) ? `<div class="text-[10px] text-euro-secondary flex items-center mt-1 font-bold"><i class="fas fa-coffee mr-1 text-[9px]"></i>æ—©é¤ï¼š${event.breakfast}</div>` : '';

                        timelineHtml += `
                        <div class="flex gap-3 relative">
                            ${!isLast ? '<div class="absolute left-3.5 top-8 bottom-[-12px] w-0.5 bg-gray-200 z-0"></div>' : ''}
                            <div class="relative z-10 w-7 h-7 flex-shrink-0 bg-euro-bg border border-euro-secondary rounded-full flex items-center justify-center text-euro-secondary text-xs">
                                <i class="fas ${icon}"></i>
                            </div>
                            <div class="flex-1 pb-6">
                                <span class="text-xs font-bold text-gray-400 font-mono bg-gray-100 px-1 rounded inline-block mb-1">${event.time}</span>
                                <div class="flex justify-between items-start gap-2">
                                    <div>
                                        <h4 class="text-base font-bold text-gray-800 leading-tight">${event.event} ${mapIconHtml} ${linkIconHtml}</h4>
                                        ${breakfastHtml}${hoursHtml}${noteBlockHtml}
                                    </div>
                                    ${ showBtn ? `<button onclick="openDetailModal('${event.id}', '${event.event}')" class="text-xs border border-euro-primary text-euro-primary px-2 py-0.5 rounded hover:bg-euro-primary hover:text-white transition flex-shrink-0 whitespace-nowrap self-start mt-0.5">æ˜ç´°</button>` : ''}
                                </div>
                            </div>
                        </div>`;
                    });

                    // è¨­å®šå¤§å¡ç‰‡çš„ ID èˆ‡å¤–è§€
                    const hotelMapLinkHtml = getMapLinkHtml(item.hotel);
                    const cardId = `card-${item.date.replace('/', '-')}`;

                    html += `
                    <div id="${cardId}" class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-12 scroll-mt-24">
                        <div class="bg-euro-primary/5 p-4 border-b border-euro-light flex justify-between items-center">
                            <div class="flex items-center gap-3">
                                <div class="bg-euro-secondary text-white rounded-lg px-3 py-1 text-center min-w-[55px]">
                                    <div class="text-xs font-light uppercase">Feb</div>
                                    <div class="text-lg font-bold font-serif leading-none">${item.date.split('/')[1]}</div>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg text-euro-text">${item.city}</h3>
                                    <div class="text-xs text-gray-500">${item.day}</div>
                                </div>
                            </div>
                            <div class="text-xs text-gray-600 font-bold flex items-center bg-white px-3 py-1.5 rounded-full shadow-sm">
                                <i class="fas fa-bed mr-1.5 text-euro-secondary"></i> ${item.hotel.split(' ')[0]} ${hotelMapLinkHtml}
                            </div>
                        </div>
                        <div class="p-5 pt-6">
                            ${timelineHtml}
                        </div>
                    </div>`;
                });
                
                container.innerHTML = html;
            }
                        
            // ================= MODALS =================
            let currentDetailId = null;
    
            function openDetailModal(id, title) {
                currentDetailId = id;
                document.getElementById('detailTitle').innerText = title;
                document.getElementById('detailId').value = id;
                
                // --- 1. è®€å–éœæ…‹è³‡æ–™ (å„ªå…ˆåˆ¤å®šæ˜¯å¦ç‚ºè‡ªå‹•ç”Ÿæˆçš„é£¯åº—ç¯€é») ---
                let staticData = { ticket: "", note: "" };
                
                itineraryData.forEach(day => {
                    const dayIdStr = day.date.replace('/', '');
                    
                    // æª¢æŸ¥æ˜¯å¦ç‚ºè©²å¤©çš„ã€Œå›åˆ°é£¯åº—ã€ ID (æ ¼å¼: end_211)
                    if (id === "end_" + dayIdStr) {
                        staticData = {
                            ticket: day.hotelTicket || "",
                            note: day.hotelNote || ""
                        };
                    } else {
                        // å¦å‰‡åœ¨ä¸€èˆ¬çš„ timeline æ‰¾ ID
                        const found = day.timeline.find(t => t.id === id);
                        if (found) staticData = found;
                    }
                });

                // --- 2. è™•ç†å‚™è¨»å…§å®¹ (LocalStorage å„ªå…ˆ) ---
                const savedNote = localStorage.getItem('ticket_note_' + id);
                if (savedNote !== null && savedNote.trim() !== "") {
                    document.getElementById('detailNote').value = savedNote;
                } else {
                    document.getElementById('detailNote').value = staticData.note || "";
                }

                // --- 3. è™•ç†éœæ…‹é è¨­ç¥¨åˆ¸é¡¯ç¤º ---
                const staticContainer = document.getElementById('staticLinksContainer');
                staticContainer.innerHTML = '';
                let hasStatic = false;

                if (staticData.ticket) {
                    // æ”¯æ´å­—ä¸²æˆ–é™£åˆ—æ ¼å¼
                    const tickets = Array.isArray(staticData.ticket) ? staticData.ticket : [{name: "é£¯åº—æ†‘è­‰/ç¥¨åˆ¸", url: staticData.ticket}];
                    tickets.forEach(t => {
                        const btn = document.createElement('a');
                        btn.href = t.url;
                        btn.target = "_blank";
                        btn.className = "flex items-center justify-center w-full bg-euro-light/50 text-euro-text border border-euro-light py-2 rounded-lg hover:bg-euro-secondary hover:text-white transition shadow-sm text-sm font-bold mb-2";
                        btn.innerHTML = `<i class="fas fa-hotel mr-2 text-xs"></i> ${t.name || "æŸ¥çœ‹æ†‘è­‰"}`;
                        staticContainer.appendChild(btn);
                    });
                    hasStatic = true;
                }

                // --- 4. è™•ç†è‡ªè¨‚é€£çµ (è¼¸å…¥æ¡†) ---
                const customContainer = document.getElementById('customLinksContainer');
                customContainer.innerHTML = '';
                const rawLinks = localStorage.getItem('ticket_custom_links_' + id);
                let customLinks = [];
                try {
                    customLinks = rawLinks ? JSON.parse(rawLinks) : [];
                } catch (e) { console.error(e); }

                customLinks.forEach(link => addCustomLinkRow(link.title, link.url));

                // æ§åˆ¶åˆ†éš”ç·šèˆ‡é è¨­è¼¸å…¥æ¡†
                const divider = document.getElementById('linkDivider');
                if (hasStatic) {
                    divider.classList.remove('hidden');
                } else {
                    divider.classList.add('hidden');
                    if(customLinks.length === 0) addCustomLinkRow('', '');
                }

                document.getElementById('detailModal').classList.add('open');
            }
            
            // è¼”åŠ©å‡½å¼ï¼šæ–°å¢ä¸€è¡Œè‡ªè¨‚é€£çµè¼¸å…¥æ¡†
            function addCustomLinkRow(title = '', url = '') {
                const container = document.getElementById('customLinksContainer');
                const div = document.createElement('div');
                div.className = "custom-link-row flex gap-2 items-start animate-fade-in";
                div.innerHTML = `
                    <div class="flex-1 space-y-1">
                        <input type="text" class="link-title w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-xs focus:outline-none focus:border-euro-secondary placeholder-gray-400" placeholder="åç¨± (ä¾‹: é¤å»³è¨‚ä½)" value="${title}">
                        <input type="text" class="link-url w-full bg-white border border-gray-300 rounded px-2 py-1.5 text-xs focus:outline-none focus:border-euro-secondary text-blue-600 placeholder-gray-400" placeholder="ç¶²å€ (https://...)" value="${url}">
                    </div>
                    <button onclick="this.parentElement.remove()" class="mt-1 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                `;
                container.appendChild(div);
            }
    
            // å„²å­˜å‡½å¼
            function saveDetail() {
                // 1. å„²å­˜å‚™è¨»
                localStorage.setItem('ticket_note_' + currentDetailId, document.getElementById('detailNote').value);
    
                // 2. å„²å­˜è‡ªè¨‚é€£çµ (æ”¶é›†æ‰€æœ‰è¼¸å…¥æ¡†)
                const rows = document.querySelectorAll('.custom-link-row');
                const links = [];
    
                rows.forEach(row => {
                    const title = row.querySelector('.link-title').value.trim();
                    const url = row.querySelector('.link-url').value.trim();
    
                    // åªæœ‰ç•¶æ¨™é¡Œæˆ–ç¶²å€æœ‰å¡«å¯«æ™‚æ‰å„²å­˜
                    if (title || url) {
                        links.push({
                            title: title || "æœªå‘½åé€£çµ", // é è¨­æ¨™é¡Œ
                            url: url
                        });
                    }
                });
    
                localStorage.setItem('ticket_custom_links_' + currentDetailId, JSON.stringify(links));
    
                closeModal('detailModal');
                renderItinerary(); // æ›´æ–°åˆ—è¡¨ä¸Šçš„åœ–ç¤º
                alert('å„²å­˜æˆåŠŸ');
            }
    
            function clearLink() {
                localStorage.setItem('ticket_link_' + currentDetailId, "");
                document.getElementById('linkDisplayArea').classList.add('hidden');
                document.getElementById('linkInputArea').classList.remove('hidden');
                document.getElementById('ticketLinkInput').value = '';
            }
    
    
            function openCityModal(cityKey) {
                const data = cityGuides[cityKey];
                const modalBody = document.getElementById('modalBody');
                if (!data) return;

                let restaurantHtml = '';
                data.restaurants.forEach(restaurant => {
                    restaurantHtml += `
                        <div class="border-b border-gray-100 py-3 last:border-0">
                            <div class="flex justify-between items-start mb-1">
                                <span class="font-bold text-euro-text text-sm">${restaurant.name}</span>
                                <a href="${restaurant.map}" target="_blank" class="text-blue-500 text-xs flex items-center">
                                    <i class="fas fa-map-marker-alt mr-1"></i>å°èˆª
                                </a>
                            </div>
                            <p class="text-xs text-gray-500 leading-relaxed">${restaurant.note}</p>
                        </div>
                    `;
                });
    
                // Helper to generate list items
                const renderList = (arr, icon) => arr ? arr.map(s => `<li class="mb-1"><i class="fas ${icon} text-euro-secondary text-xs mr-2"></i>${s}</li>`).join('') : '';
    
                modalBody.innerHTML = `
                    <div class="h-48 relative">
                        <img src="${data.img}" class="w-full h-full object-cover rounded-t-2xl">
                        <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4 pt-12">
                            <h2 class="text-2xl font-bold text-white serif-font">${data.title}</h2>
                        </div>
                    </div>
    
                    <div class="p-6">
                        <p class="text-gray-600 leading-relaxed mb-6 text-justify text-sm">${data.intro}</p>
                        <div class="text-xs text-gray-500 bg-euro-light/30 p-3 rounded flex items-start">
                            <i class="fas fa-exclamation-circle mr-2 mt-0.5 text-euro-secondary"></i>
                            <span>${data.tips}</span>
                        </div>

                        <div class="mt-4 space-y-4">
                            <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-euro-primary">
                                <h4 class="font-bold text-gray-800 text-sm mb-2">å¿…è¨ªæ™¯é»</h4>
                                <ul class="text-sm text-gray-600">${renderList(data.spots, 'fa-check')}</ul>
                            </div>
                            <div class="bg-orange-50 p-3 rounded-lg border-l-4 border-orange-300">
                                <h4 class="font-bold text-gray-800 text-sm mb-2">ç¾é£Ÿæ¨è–¦</h4>
                                <ul class="text-sm text-gray-600">${renderList(data.food, 'fa-utensils')}</ul>
                            </div>
                            <div class="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-300">
                                <h4 class="font-bold text-gray-800 text-sm mb-2">å¿…è²·è³¼ç‰©</h4>
                                <ul class="text-sm text-gray-600">${renderList(data.shop, 'fa-shopping-bag')}</ul>
                            </div>
                            <div class="bg-gray-50 p-3 rounded-lg border-l-4 border-brown-300">
                                <h4 class="font-bold text-gray-800 text-sm mb-2">é¤å»³æ¨è–¦</h4>
                                <div>${restaurantHtml}</div>
                            </div>
                        </div>
    
                        <div class="mt-6 pt-4 border-t border-gray-100">
                            <button onclick="closeModal('cityModal')" class="w-full bg-gray-200 text-gray-500 text-sm font-medium py-3 rounded-lg hover:bg-gray-300 transition active:scale-95 tracking-wide">
                                é—œé–‰å°è¦½
                            </button>
                        </div>
                    </div>`;
    
                document.getElementById('cityModal').classList.add('open');
            }
    
            function closeModal(modalId) { document.getElementById(modalId).classList.remove('open'); }
    
            // ================= CHECKLIST =================
            function loadChecklist() {
                let data = JSON.parse(localStorage.getItem('trip_checklist')) || defaultChecklist;
                const container = document.getElementById('checklist-container');
                container.innerHTML = '';
                data.forEach((item, index) => {
                    const checked = item.done ? 'checked' : '';
                    const style = item.done ? 'line-through text-gray-300' : 'text-gray-700';
                    const div = document.createElement('div');
                    div.className = "flex items-center gap-3 py-2 border-b border-gray-50 last:border-0";
                    div.innerHTML = `<input type="checkbox" ${checked} class="w-5 h-5 rounded text-euro-secondary focus:ring-euro-secondary" onchange="toggleCheck(${index})"><span class="${style} flex-1">${item.text}</span>`;
                    container.appendChild(div);
                });
            }
            function toggleCheck(index) {
                let data = JSON.parse(localStorage.getItem('trip_checklist')) || defaultChecklist;
                data[index].done = !data[index].done;
                localStorage.setItem('trip_checklist', JSON.stringify(data));
                loadChecklist();
            }
            function scrollToToday() {
                // 1. å–å¾—ä»Šå¤©çš„æ—¥æœŸå­—ä¸² (æ ¼å¼è¦è·Ÿ ID ä¸€æ¨£ï¼Œä¾‹å¦‚ 2-7)
                const now = new Date();
                const month = now.getMonth() + 1;
                const date = now.getDate();
    
                // ç‚ºäº†æ¸¬è©¦ï¼Œæ‚¨å¯ä»¥æš«æ™‚æŠŠä¸‹æ–¹é€™è¡Œè§£é™¤è¨»è§£ï¼Œå¼·åˆ¶è¨­å®šæˆè¡Œç¨‹ä¸­æœ‰çš„æ—¥æœŸ
                // const month = 2; const date = 14; 
    
                const todayId = `card-${month}-${date}`;
                const todayElement = document.getElementById(todayId);
    
                if (todayElement) {
                    // 2. ä½¿ç”¨ setTimeout ç¢ºä¿ç•«é¢å·²ç¶“æ¸²æŸ“å®Œæˆ (éå¸¸é‡è¦)
                    setTimeout(() => {
                        // 3. æ‰‹å‹•è¨ˆç®—ä½ç½®
                        // å–å¾—å…ƒä»¶è·é›¢é é¢é ‚ç«¯çš„è·é›¢
                        const elementPosition = todayElement.getBoundingClientRect().top + window.scrollY;
    
                        // æ‰£é™¤ Header çš„é«˜åº¦ (ç´„ 80px) å†å¤šç•™ä¸€é»ç©ºé–“ (20px) = 100px
                        const offsetPosition = elementPosition - 100;
    
                        // 4. åŸ·è¡Œæ²å‹•
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: "smooth"
                        });
                    }, 100); // å»¶é² 100 æ¯«ç§’ï¼Œçµ¦ç€è¦½å™¨ä¸€é»æ™‚é–“å–˜æ¯
                } else {
                    console.log("æ‰¾ä¸åˆ°ä»Šå¤©çš„è¡Œç¨‹å¡ç‰‡: " + todayId);
                }
            }

            function goToUrl(url) {
                window.open(url, '_blank');
            }

            // åˆ‡æ›é¸å–®é¡¯ç¤º/éš±è—
            function toggleMobileMenu() {
                const menu = document.getElementById('mobile-date-menu');
                const icon = document.getElementById('menu-icon');
                const isHidden = menu.classList.contains('hidden');
                
                if (isHidden) {
                    menu.classList.remove('hidden');
                    menu.classList.add('animate-bounce-in'); // å¯åŠ å…¥ç°¡å–®å‹•ç•«
                    icon.className = 'fas fa-times text-xl'; // åˆ‡æ›æˆé—œé–‰åœ–ç¤º
                } else {
                    menu.classList.add('hidden');
                    icon.className = 'fas fa-calendar-alt text-xl';
                }
            }

            // æ¸²æŸ“æŒ‰éˆ• 
            function renderSideTabs() {
                const pcTabs = document.getElementById('side-date-tabs');
                const mobileTabs = document.getElementById('mobile-date-tabs');
                
                if (pcTabs) pcTabs.innerHTML = '';
                if (mobileTabs) mobileTabs.innerHTML = '';

                itineraryData.forEach((item) => {
                    const cardId = `card-${item.date.replace('/', '-')}`;
                    
                    // --- å»ºç«‹æŒ‰éˆ•æ¨£æ¿ ---
                    const createBtn = (isMobile) => {
                        const btn = document.createElement('button');
                        
                       // é‡è¦ï¼šé€™è£¡å¿…é ˆåŒ…å« date-tab-btn
                        btn.className = isMobile 
                            ? "text-left px-5 py-4 border-b border-gray-50 transition-colors date-tab-btn"
                            : "text-left py-3 px-1 text-sm transition-all -ml-[18px] pl-4 whitespace-nowrap date-tab-btn";

                        btn.setAttribute('data-date', cardId);
                        btn.innerHTML = `
                            <span class="block text-[9px] uppercase tracking-wider opacity-60">${item.day}</span>
                            <span class="font-bold">${item.date}</span>
                        `;
                        
                        btn.onclick = () => {
                            const target = document.getElementById(cardId);
                            if (target) {
                                target.scrollIntoView({ behavior: 'smooth' });
                                if (isMobile) toggleMobileMenu(); // æ‰‹æ©Ÿç‰ˆé»å®Œè‡ªå‹•ç¸®åˆ
                            }
                        };
                        return btn;
                    };

                    if (pcTabs) pcTabs.appendChild(createBtn(false));
                    if (mobileTabs) mobileTabs.appendChild(createBtn(true));
                });
                
                initScrollSpy();
            }

            function initScrollSpy() {
                const options = {
                    root: null,
                    rootMargin: '-20% 0px -75% 0px', // ç¸®å°è§¸ç™¼å€ï¼Œç²¾æº–å®šä½
                    threshold: 0
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const id = entry.target.id;
                            
                            // æ‰¾åˆ°æ‰€æœ‰çš„æŒ‰éˆ•ï¼ˆåŒ…å« PC å´é‚Šå’Œæ‰‹æ©Ÿå½ˆå‡ºé¸å–®å…§çš„ï¼‰
                            const targetBtns = document.querySelectorAll(`.date-tab-btn[data-date="${id}"]`);
                            
                            // å…ˆé‡ç½®æ‰€æœ‰æŒ‰éˆ•æ¨£å¼
                            document.querySelectorAll('.date-tab-btn').forEach(btn => {
                                btn.classList.remove('active');
                                // å›å¾©é è¨­ç°è‰² (å¦‚æœæœ‰çš„è©±)
                                btn.classList.add('text-gray-400');
                            });

                            // è³¦äºˆé¸ä¸­æŒ‰éˆ•é†’ç›®æ¨£å¼
                            targetBtns.forEach(btn => {
                                btn.classList.add('active');
                                btn.classList.remove('text-gray-400'); // ç§»é™¤ç°è‰²é¿å…å¹²æ“¾
                                
                                // è®“å°è¦½åˆ—æ²å‹•åˆ°è©²æŒ‰éˆ•ä½ç½®
                                btn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            });
                        }
                    });
                }, options);

                // ç›£æ§æ‰€æœ‰å¡ç‰‡
                itineraryData.forEach(item => {
                    const cardId = `card-${item.date.replace('/', '-')}`;
                    const el = document.getElementById(cardId);
                    if (el) observer.observe(el);
                });
            }

        </script>
    </body>
    
</html>

